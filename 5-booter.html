<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
<title>5. Booter | OpenCore 简体中文参考手册(非官方)</title>
<meta name="generator" content="Hexo 4.2.0">
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="description" content="由 Sukka 和黑苹果爱好者们维护的 OpenCore 文档简体中文翻译，实时更新 OpenCore 上游文档改动。努力提供权威的 OpenCore 简体中文参考资料。">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/logo/favicon.ico">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/github.min.css">
<link rel="stylesheet" href="/theme-doku/css/doku.css">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

</head>

<body>
    

<nav id="doku-navbar" class="navbar is-spaced has-shadow">
    <div class="container">
        <div class="navbar-brand">
            <!-- burger btn -->
            <a role="button" class="navbar-burger burger" id="doku-sidebar-toggle">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>

            <a class="navbar-item" href="https://oc.skk.moe">
                <h1 class="doku-navbar-title">
                    <img src="/logo/navbar.png" height="28">
                    <span class="is-size-4"></span>
                </h1>
            </a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-start">
                
                    <a class="navbar-item" href="/">
                        
                        
                            <span>OpenCore 参考手册(简体中文)</span>
                        
                    </a>
                
                    <a class="navbar-item" href="/search.html">
                        
                            <span class="icon">
                                <i class="fas fa-search"></i>
                            </span>
                        
                        
                            <span>站内搜索</span>
                        
                    </a>
                
                    <a class="navbar-item" href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">
                        
                            <span class="icon">
                                <i class="fab fa-github"></i>
                            </span>
                        
                        
                            <span>GitHub</span>
                        
                    </a>
                
                <!-- navbar link -->
                <!--<a class="navbar-item">
                Home
            </a>-->
            </div>
            <!-- i18n switch -->
            <div class="navbar-end">
                <!--<div class="navbar-item">
                    <div class="dropdown is-right is-hoverable">
                        <div class="dropdown-trigger">
                            <button class="button" id="navbar-i18n-btn">
                                <span class="icon is-small">
                                    <i class="fas fa-globe-americas" aria-hidden="true"></i>
                                </span>
                                <span>Language</span>
                                <span class="icon is-small">
                                    <i class="fas fa-angle-down" aria-hidden="true"></i>
                                </span>
                            </button>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-content">
                                <a href="#" class="dropdown-item">
                                    Dropdown item
                                </a>
                                <a class="dropdown-item">
                                    Other dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Active dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Other dropdown item
                                </a>
                            </div>
                        </div>
                    </div>
                </div>-->
            </div>
        </div>
    </div>
</nav>


    <div class="container-fluid">
        <section class="main-content">
            


<aside class="doku-sidebar" id="doku-sidebar">
    <div class="doku-sidebar-content">
        <div class="menu">
            
                <ul class="menu-list is-hidden-desktop">
                    
                        
                            <li><a href="/">OpenCore 参考手册(简体中文)</span></a></li>
                        
                    
                        
                            <li><a href="/search.html">站内搜索</span></a></li>
                        
                    
                        
                            <li><a href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">GitHub</span></a></li>
                        
                    
                </ul>
            
            <hr class="is-hidden-desktop">
            
                
                    <ul class="menu-list">
                        
                            <li><a  href="/">0. 首页</a></li>
                        
                            <li><a  href="/1-introduction.html">1. 简介</a></li>
                        
                            <li><a  href="/2-configuration.html">2. 配置</a></li>
                        
                            <li><a  href="/3-setup.html">3. Setup</a></li>
                        
                            <li><a  href="/4-acpi.html">4. ACPI</a></li>
                        
                            <li><a class="is-current" href="/5-booter.html">5. Booter</a></li>
                        
                            <li><a  href="/6-device-properties.html">6. DeviceProperties</a></li>
                        
                            <li><a  href="/7-kernel.html">7. Kernel</a></li>
                        
                            <li><a  href="/8-misc.html">8. Misc</a></li>
                        
                            <li><a  href="/9-nvram.html">9. NVRAM</a></li>
                        
                            <li><a  href="/10-platform-info.html">10. PlatformInfo</a></li>
                        
                            <li><a  href="/11-uefi.html">11. UEFI</a></li>
                        
                            <li><a  href="/12-troubleshooting.html">12. 排错</a></li>
                        
                            <li><a  href="/kextlist.html">附录 1. OpenCore 兼容 Kext 列表</a></li>
                        
                    </ul>
                
            
        </div>
    </div>
</aside>

            <main class="is-paddingless doku-main-wrapper" id="doku-main">
                

<article class="doku-document-container clearfix">
    <header class="hero is-light" id="doku-document-hero">
        <div class="hero-body">
            <h1 class="title">5. Booter</h1>
            
                <p class="subtitle">配置 FwRuntimeServices.efi（Slide 值计算、KASLR）</p>
            
            
                
                    <p><small>由 Sukka 整理，由 Sukka 翻译。</small></p>
                
                
                    <p><small>本页面最后更新于 2020 年 02 月 14 日</small></p>
                
                <br>
            
            
                <a href="https://github.com/sukkaw/OpenCore-Document-zh_Hans/tree/master/source/5-booter.md" target="_blank" rel="external nofollow noreferrer noopener" class="button is-small is-rounded is-black"><span class="icon is-small"><i class="fab fa-github"></i></span><span>在 GitHub 上编辑</span></a>
            
        </div>
    </header>
    <div class="columns">
        <div class="column is-9-tablet doku-document-wrapper">
            <div class="content">
                <h2 id="5-1-简介"><a href="#5-1-简介" class="headerlink" title="5.1 简介"></a>5.1 简介</h2><p>This section allows to apply different kinds of UEFI modifications on Apple bootloader (<code>boot.efi</code>). The modifications currently provide various patches and environment alterations for different firmwares. Some of these features were originally implemented as a part of <a href="https://github.com/acidanthera/AptioFixPkg" target="_blank" rel="noopener">AptioMemoryFix.efi</a>, which is no longer maintained. See <code>Tips and Tricks</code> section for migration steps.</p>
<p>If you are using this for the first time on a customised firmware, there is a<br>list of checks to do first. Prior to starting please ensure that you have:</p>
<ul>
<li>Most up-to-date UEFI firmware (check your motherboard vendor website).</li>
<li><code>Fast Boot</code> and <code>Hardware Fast Boot</code> disabled in firmware settings if present.</li>
<li><code>Above 4G Decoding</code> or similar enabled in firmware settings if present. Note, that on some motherboards (notably ASUS WS-X299-PRO) this option causes adverse effects, and must be disabled. While no other motherboards with the same issue are known, consider this option to be first to check if you have erratic boot failures.</li>
<li><code>DisableIoMapper</code> quirk enabled, or <code>VT-d</code> disabled in firmware settings if present, or ACPI DMAR table dropped.</li>
<li><strong>No</strong> <code>slide</code> boot argument present in NVRAM or anywhere else. It is not necessary unless you cannot boot at all or see <code>No slide values are usable! Use custom slide!</code> message in the log.</li>
<li><code>CFG Lock</code> (MSR <code>0xE2</code> write protection) disabled in firmware settings if present. Cconsider <a href="https://github.com/LongSoft/UEFITool/blob/master/UEFIPatch/patches.txt" target="_blank" rel="noopener">patching it</a> if you have enough skills and no option is available. See <a href="https://github.com/acidanthera/AppleSupportPkg#verifymsre2" target="_blank" rel="noopener">VerifyMsrE2</a> nots for more details.</li>
<li><code>CSM</code> (Compatibility Support Module) disabled in firmware settings if present. You may need to flash GOP ROM on NVIDIA 6xx/AMD 2xx or older. Use <a href="https://www.win-raid.com/t892f16-AMD-and-Nvidia-GOP-update-No-requests-DIY.html" target="_blank" rel="noopener">GopUpdate</a> or <a href="http://www.insanelymac.com/forum/topic/299614-asus-eah6450-video-bios-uefi-gop-upgrade-and-gop-uefi-binary-in-efi-for-many-ati-cards/page-1#entry2042163" target="_blank" rel="noopener">AMD UEFI GOP MAKER</a> in case you are not sure how.</li>
<li><code>EHCI/XHCI Hand-off</code> enabled in firmware settings <code>only</code> if boot stalls unless USB devices are disconnected.</li>
<li><code>VT-x</code>, <code>Hyper Threading</code>, <code>Execute Disable Bit</code> enabled in firmware settings if present.</li>
<li>While it may not be required, sometimes you have to disable <code>Thunderbolt support</code>, <code>Intel SGX</code>, and <code>Intel Platform Trust</code> in firmware settings present.</li>
</ul>
<p>When debugging sleep issues you may want to (temporarily) disable Power Nap and automatic power off, which appear to sometimes cause wake to black screen or boot loop issues on older platforms. The particular issues may vary, but in general you should<br>check ACPI tables first. Here is an example of a bug found in some <a href="http://www.insanelymac.com/forum/topic/329624-need-cmos-reset-after-sleep-only-after-login/#entry2534645" target="_blank" rel="noopener">Z68 motherboards</a>. To turn Power Nap and the others off run the following commands in Terminal:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pmset autopoweroff 0<br>sudo pmset powernap 0<br>sudo pmset standby 0<br></code></pre></td></tr></table></figure>

<p><strong>注</strong>： These settings may reset at hardware change and in certain other circumstances.<br>To view their current state use <code>pmset -g</code> command in Terminal.</p>
<h2 id="5-2-属性列表"><a href="#5-2-属性列表" class="headerlink" title="5.2 属性列表"></a>5.2 属性列表</h2><h3 id="5-2-1-MmioWhitelist"><a href="#5-2-1-MmioWhitelist" class="headerlink" title="5.2.1 MmioWhitelist"></a>5.2.1 MmioWhitelist</h3><p><strong>Type</strong>: plist array<br><strong>Description</strong>: Designed to be filled with <code>plist dict</code> values, describing addresses critical for particular firmware functioning when <code>DevirtualiseMmio</code> quirk is in use. See MmioWhitelist Properties section below.</p>
<blockquote>
<p>译者注：如果开机卡在 <code>PCI...</code> 可以尝试开启 Item 1 下的 Patch</p>
</blockquote>
<h3 id="5-2-2-Quirks"><a href="#5-2-2-Quirks" class="headerlink" title="5.2.2 Quirks"></a>5.2.2 Quirks</h3><p><strong>Type</strong>: plist dict<br><strong>Description</strong>: Apply individual booter quirks described in Quirks Properties section below.</p>
<h2 id="5-3-MmioWhitelist-属性"><a href="#5-3-MmioWhitelist-属性" class="headerlink" title="5.3 MmioWhitelist 属性"></a>5.3 MmioWhitelist 属性</h2><h3 id="5-3-1-Address"><a href="#5-3-1-Address" class="headerlink" title="5.3.1 Address"></a>5.3.1 Address</h3><p><strong>Type</strong>: plist integer<br><strong>Failsafe</strong>: 0<br><strong>Description</strong>: Exceptional MMIO address, which memory descriptor should be left virtualised (unchanged) by <code>DevirtualiseMmio</code>. This means that the firmware will be able to directly communicate with this memory region during operating system functioning, because the region this value is in will be assigned a virtual address.</p>
<h3 id="5-3-2-Comment"><a href="#5-3-2-Comment" class="headerlink" title="5.3.2 Comment"></a>5.3.2 Comment</h3><p><strong>Type</strong>: plist string<br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: Arbitrary ASCII string used to provide human readable reference for the entry. It is implementation<br>defined whether this value is used.</p>
<h3 id="5-3-3-Enabled"><a href="#5-3-3-Enabled" class="headerlink" title="5.3.3 Enabled"></a>5.3.3 Enabled</h3><p><strong>Type</strong>: plist boolean<br><strong>Failsafe</strong>: false<br><strong>Description</strong>: This address will be devirtualised unless set to <code>true</code>.</p>
<h2 id="5-4-Quirks-属性"><a href="#5-4-Quirks-属性" class="headerlink" title="5.4 Quirks 属性"></a>5.4 Quirks 属性</h2><h3 id="5-4-1-AvoidRuntimeDefrag"><a href="#5-4-1-AvoidRuntimeDefrag" class="headerlink" title="5.4.1 AvoidRuntimeDefrag"></a>5.4.1 <code>AvoidRuntimeDefrag</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 防止 boot.efi 运行时执行内存碎片整理</p>
<p>这个选项通过提供对可变存储的支持，修复了包括日期、时间、NVRAM、电源控制等 UEFI Runtime 服务。</p>
<p><em>注</em>: 除 Apple 和 VMware 固件外，都需要启用此选项。</p>
<h3 id="5-4-2-DevirtualiseMmio"><a href="#5-4-2-DevirtualiseMmio" class="headerlink" title="5.4.2 DevirtualiseMmio"></a>5.4.2 <code>DevirtualiseMmio</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 从选定的 MMIO 区域中删除 Runtime 属性。</p>
<p>通过删除已知内存区域的 runtime bit，此选项可减少内存映射中 stolen memory footprint。 这个 Quirks 可能会导致可用的 KASLR slides 增加，但如果没有其他措施，不一定与目标主板兼容。 通常，这会释放 64 到 256 MB的内存（具体数值会显示在调试日志中）。在某些平台上这是引导 macOS 的唯一方法，否则在引导加载程序阶段会出现内存分配错误。</p>
<p>该选项通常对所有固件都有用，除了一些非常古老的固件（例如 Sandy Bridge）。 在某些固件上，它可能需要一个例外映射列表。为了使 NVRAM 和休眠功能正常工作，获取其虚拟地址仍然是必要的。 请参考 <code>MmioWhitelist</code> 章节来实现这个。</p>
<h3 id="5-4-3-DisableSingleUser"><a href="#5-4-3-DisableSingleUser" class="headerlink" title="5.4.3 DisableSingleUser"></a>5.4.3 <code>DisableSingleUser</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 禁用 Apple 单用户模式</p>
<p>这个选项可以禁用 <code>CMD+S</code> 热键和 <code>-s</code> 启动参数来限制单用户模式。启用这一 Quirks 后预期行为应和 T2 的模型行为类似。请参考 Apple 的 <a href="https://support.apple.com/HT201573" target="_blank" rel="noopener">这篇文章</a> 以了解如何在启用这一 Quirks 后继续使用单用户模式。</p>
<h3 id="5-4-4-DisableVariableWrite"><a href="#5-4-4-DisableVariableWrite" class="headerlink" title="5.4.4 DisableVariableWrite"></a>5.4.4 <code>DisableVariableWrite</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 防止 macOS 获取 NVRAM 的写入权限。</p>
<p>这个选项可以限制 macOS 对 NVRAM 的写入。这个 Quirk 需要 <code>FwRuntimeServices.efi</code> 提供了 <code>OC_FIRMWARE_RUNTIME</code> 协议的实现.</p>
<p><em>注</em>: 这个 Quirk 也可以避免由于无法将变量写入 NVRAM 而导致的对操作系统的破坏。</p>
<blockquote>
<p>译者注：在 Z390/HM370 等没有原生 macOS 支持 NVRAM 的主板上需要开启。</p>
</blockquote>
<h3 id="5-4-5-DiscardHibernateMap"><a href="#5-4-5-DiscardHibernateMap" class="headerlink" title="5.4.5 DiscardHibernateMap"></a>5.4.5 <code>DiscardHibernateMap</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 复用原始的休眠内存映射。</p>
<p>这一选项强制 XNU 内核忽略新提供的内存映射、认定设备从休眠状态唤醒后无需对其更改。如果你在使用 Windows，则 <a href="(https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-uefi#hibernation-state-s4-transition-requirements)">务必启用</a> 这一选项，因为 Windows 要求 S4 花心后保留运行内存的大小和未知。</p>
<p><em>注</em>: 这可能用于解决较旧硬件上的错误内存映射。如 Insyde 固件的 Ivy Bridge 笔记本电脑或者 Acer V3-571G。 除非您完全了解这一选项可能导致的后果，否则请勿使用此功能。</p>
<h3 id="5-4-6-EnableSafeModeSlide"><a href="#5-4-6-EnableSafeModeSlide" class="headerlink" title="5.4.6 EnableSafeModeSlide"></a>5.4.6 <code>EnableSafeModeSlide</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 修补引导加载程序以在安全模式下启用 KASLR。</p>
<p>这个选与启动到安全模式（启动时按住 Shift 或受用了 <code>-x</code> 启动参数）有关。默认情况下，安全模式会使用 <code>slide=0</code>，这个 Quirks 试图通过修补 boot.efi 接触这一限制。只有当 <code>ProvideCustomSlide</code> 启用后才可以启用本 Quirks。</p>
<p><em>注</em>: 除非启动到安全模式失败，否则不需要启用此选项。</p>
<h3 id="5-4-7-EnableWriteUnprotector"><a href="#5-4-7-EnableWriteUnprotector" class="headerlink" title="5.4.7 EnableWriteUnprotector"></a>5.4.7 <code>EnableWriteUnprotector</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 关闭 CR0 寄存器中的写入保护</p>
<p>This option bypasses <code>RX̂</code> permissions in code pages of UEFI runtime services by removing write protection (<code>WP</code>) bit from <code>CR0</code> register during their execution. This quirk requires <code>OC_FIRMWARE_RUNTIME</code> protocol implemented in <code>FwRuntimeServices.efi</code>.</p>
<p><em>注</em>：The necessity of this quirk is determined by early boot crashes<br>of the firmware.</p>
<h3 id="5-4-8-ForceExitBootServices"><a href="#5-4-8-ForceExitBootServices" class="headerlink" title="5.4.8 ForceExitBootServices"></a>5.4.8 <code>ForceExitBootServices</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 开启后会确保 <code>ExitBootServices</code> 即使在 MemoryMap 发生更改时也能调用成功</p>
<p>Try to ensure that <code>ExitBootServices</code> call succeeds even with outdated MemoryMap key argument by obtaining current memory map and retrying <code>ExitBootServices</code> call.</p>
<p><em>注</em>：The necessity of this quirk is determined by early boot crashes of the firmware. 请勿启用这一选项，除非你详细了解这一选项可能导致的后果。</p>
<h3 id="5-4-9-ProtectCsmRegion"><a href="#5-4-9-ProtectCsmRegion" class="headerlink" title="5.4.9 ProtectCsmRegion"></a>5.4.9 <code>ProtectCsmRegion</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 保护 CSM 区域免于重新分配</p>
<p>确保将 CSM 内存区域标记为 ACPI NVS，以防止 boot.efi 或 XNU 重新定位或使用这一区域。</p>
<p><em>注</em>：是否启用这一 Quirk 取决于你是否遇到了休眠或其他问题。<code>AvoidRuntimeDefrag</code> 理应能够解决所有类似的问题，所以已知的固件都不需要启用这一选项。除非你完全了解这一选项及其后果，否则请勿使用。</p>
<h3 id="5-4-10-ProtectSecureBoot"><a href="#5-4-10-ProtectSecureBoot" class="headerlink" title="5.4.10 ProtectSecureBoot"></a>5.4.10 <code>ProtectSecureBoot</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 保护 UEFI 安全启动变量不被写入。</p>
<p>尝试从操作系统写入 <code>db</code>、<code>dbx</code>、<code>PK</code> 和 <code>KEK</code> 时生成报告。</p>
<p><em>注</em>：这个 Quirk 主要试图避免碎片整理导致的 NVRAM 相关问题，如 Insyde 或 <code>MacPro5,1</code>。</p>
<h3 id="5-4-11-ProvideCustomSlide"><a href="#5-4-11-ProvideCustomSlide" class="headerlink" title="5.4.11 ProvideCustomSlide"></a>5.4.11 <code>ProvideCustomSlide</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 为低内存设备提供自定义 KASLR slide 值。</p>
<p>开启这个选项后，将会对固件进行内存映射分析，检查所有 slide（从 1 到 255）中是否有可用的。由于 boot.efi 私用 rdrand 或伪随机 rdtsc 随机生成此值，因此有可能出现冲突的 slide 值被使用并导致引导失败。如果出现潜在的冲突，这个选项将会强制为 macOS 选择一个伪随机值。这同时确保了 <code>slide=</code> 参数不会被传递给操作系统。</p>
<p><em>注</em>: OpenCore 会自动检查是否需要启用这一选项。如果 OpenCore 的调试日志中出现 <code>OCABC: Only N/256 slide values are usable!</code> 则请启用这一选项。</p>
<h3 id="5-4-12-SetupVirtualMap"><a href="#5-4-12-SetupVirtualMap" class="headerlink" title="5.4.12 SetupVirtualMap"></a>5.4.12 <code>SetupVirtualMap</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 将 <code>SetVirtualAddresses</code> 调用修复为虚拟地址.</p>
<p>Select firmwares access memory by virtual addresses after <code>SetVirtualAddresses</code> call, which results in early boot crashes. This quirk workarounds the problem by performing early boot identity mapping of assigned virtual addresses to physical memory.</p>
<p><em>注</em>：是否启用这个 Quirks 取决于你是否遇到了 Early Boot 故障。目前具有内存保护支持的新固件（例如 OVMF ）由于一些原因不支持此 Quirks：<a href="https://github.com/acidanthera/bugtracker/issues/719" target="_blank" rel="noopener">acidanthera/bugtracker#719</a>。</p>
<h3 id="5-4-13-ShrinkMemoryMap"><a href="#5-4-13-ShrinkMemoryMap" class="headerlink" title="5.4.13 ShrinkMemoryMap"></a>5.4.13 <code>ShrinkMemoryMap</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 尝试合并相似的内存映射条目。</p>
<p>Select firmwares have very large memory maps, which do not fit Apple kernel, permitting up to <code>64</code> slots for runtime memory. This quirk attempts to unify contiguous slots of similar types to prevent boot failures.</p>
<p><em>注</em>: 是否启用这个 Quirks 取决于你是否遇到了 Early Boot 故障。Haswell 及更新版本一般都不需要启用。除非你完全了解这一选项及其后果，否则请勿使用。</p>
<h3 id="5-4-14-SignalAppleOS"><a href="#5-4-14-SignalAppleOS" class="headerlink" title="5.4.14 SignalAppleOS"></a>5.4.14 <code>SignalAppleOS</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 不论使用什么操作系统、总是向 OSInfo 报告启动的是 macOS。</p>
<p>Mac 设备在不同的操作系统中具有不同的行为，因此如果你在使用 Mac 设备，这一功能会非常有用。例如，你可以通过启用这一选项为某些双 GPU 的 MacBook 型号中在 Windows 和 Linux 中启用 Intel GPU。</p>

            </div>

            <ul class="doku-pagination">
            <li class="page-item page-prev">
                <a href="/4-acpi.html">
                    <div class="page-item-subtitle"><span class="icon is-small"><i class="fas fa-arrow-left"></i></span> <span>前一页</span></div>
                    <div class="page-item-title h5">4. ACPI</div>
                </a>
            </li>
            <li class="page-item page-next">
                <a href="/6-device-properties.html">
                    <div class="page-item-subtitle"><span>后一页</span> <span class="icon is-small"><i class="fas fa-arrow-right"></i></span></div>
                    <div class="page-item-title h5">6. DeviceProperties</div>
                </a>
            </li></ul>
        </div>
        
        <div class="column is-3 is-narrow-touch is-hidden-mobile">
            <aside class="doku-document-toc" id="doku-document-toc">
                <div class="doku-document-toc-content">
                    <p class="doku-document-toc-title">目录</p>
                    <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-1-简介"><span class="post-toc-text">5.1 简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-2-属性列表"><span class="post-toc-text">5.2 属性列表</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-1-MmioWhitelist"><span class="post-toc-text">5.2.1 MmioWhitelist</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-2-2-Quirks"><span class="post-toc-text">5.2.2 Quirks</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-3-MmioWhitelist-属性"><span class="post-toc-text">5.3 MmioWhitelist 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-1-Address"><span class="post-toc-text">5.3.1 Address</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-2-Comment"><span class="post-toc-text">5.3.2 Comment</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-3-3-Enabled"><span class="post-toc-text">5.3.3 Enabled</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-4-Quirks-属性"><span class="post-toc-text">5.4 Quirks 属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-1-AvoidRuntimeDefrag"><span class="post-toc-text">5.4.1 AvoidRuntimeDefrag</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-2-DevirtualiseMmio"><span class="post-toc-text">5.4.2 DevirtualiseMmio</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-3-DisableSingleUser"><span class="post-toc-text">5.4.3 DisableSingleUser</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-4-DisableVariableWrite"><span class="post-toc-text">5.4.4 DisableVariableWrite</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-5-DiscardHibernateMap"><span class="post-toc-text">5.4.5 DiscardHibernateMap</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-6-EnableSafeModeSlide"><span class="post-toc-text">5.4.6 EnableSafeModeSlide</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-7-EnableWriteUnprotector"><span class="post-toc-text">5.4.7 EnableWriteUnprotector</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-8-ForceExitBootServices"><span class="post-toc-text">5.4.8 ForceExitBootServices</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-9-ProtectCsmRegion"><span class="post-toc-text">5.4.9 ProtectCsmRegion</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-10-ProtectSecureBoot"><span class="post-toc-text">5.4.10 ProtectSecureBoot</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-11-ProvideCustomSlide"><span class="post-toc-text">5.4.11 ProvideCustomSlide</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-12-SetupVirtualMap"><span class="post-toc-text">5.4.12 SetupVirtualMap</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-13-ShrinkMemoryMap"><span class="post-toc-text">5.4.13 ShrinkMemoryMap</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-4-14-SignalAppleOS"><span class="post-toc-text">5.4.14 SignalAppleOS</span></a></li></ol></li></ol>
                </div>
            </aside>
        </div>
        
    </div>
</article>

                <footer>
    <div class="doku-footer-container is-clearfix">
        <div class="doku-footer-item is-pulled-left">&copy; <span id="doku-copyrght-year"></span> <a href="/">OpenCore 简体中文参考手册(非官方)</a></div>

        <div class="doku-footer-item is-pulled-right">Powered by <a href="https://hexo.io" target="_blank" rel="external noopenner nofollow">Hexo</a> & <a href="https://github.com/SukkaW/hexo-theme-doku" target="_blank" rel="external noopenner nofollow">Doku</a></div>
    </div>
</footer>

            </main>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/stickyfilljs@2.1.0/dist/stickyfill.min.js"></script>
    <script src="/theme-doku/js/doku.js"></script>
</body>

</html>
