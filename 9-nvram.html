<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
<title>9. NVRAM | OpenCore 简体中文参考手册(非官方)</title>
<meta name="generator" content="Hexo 4.2.0">
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="description" content="由 Sukka 和黑苹果爱好者们维护的 OpenCore 文档简体中文翻译，实时更新 OpenCore 上游文档改动。努力提供权威的 OpenCore 简体中文参考资料。">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/logo/favicon.ico">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/github.min.css">
<link rel="stylesheet" href="/theme-doku/css/doku.css">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

</head>

<body>
    

<nav id="doku-navbar" class="navbar is-spaced has-shadow">
    <div class="container">
        <div class="navbar-brand">
            <!-- burger btn -->
            <a role="button" class="navbar-burger burger" id="doku-sidebar-toggle">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>

            <a class="navbar-item" href="https://oc.skk.moe">
                <h1 class="doku-navbar-title">
                    <img src="/logo/navbar.png" height="28">
                    <span class="is-size-4"></span>
                </h1>
            </a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-start">
                
                    <a class="navbar-item" href="/">
                        
                        
                            <span>OpenCore 参考手册(简体中文)</span>
                        
                    </a>
                
                    <a class="navbar-item" href="/search.html">
                        
                            <span class="icon">
                                <i class="fas fa-search"></i>
                            </span>
                        
                        
                            <span>站内搜索</span>
                        
                    </a>
                
                    <a class="navbar-item" href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">
                        
                            <span class="icon">
                                <i class="fab fa-github"></i>
                            </span>
                        
                        
                            <span>GitHub</span>
                        
                    </a>
                
                <!-- navbar link -->
                <!--<a class="navbar-item">
                Home
            </a>-->
            </div>
            <!-- i18n switch -->
            <div class="navbar-end">
                <!--<div class="navbar-item">
                    <div class="dropdown is-right is-hoverable">
                        <div class="dropdown-trigger">
                            <button class="button" id="navbar-i18n-btn">
                                <span class="icon is-small">
                                    <i class="fas fa-globe-americas" aria-hidden="true"></i>
                                </span>
                                <span>Language</span>
                                <span class="icon is-small">
                                    <i class="fas fa-angle-down" aria-hidden="true"></i>
                                </span>
                            </button>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-content">
                                <a href="#" class="dropdown-item">
                                    Dropdown item
                                </a>
                                <a class="dropdown-item">
                                    Other dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Active dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Other dropdown item
                                </a>
                            </div>
                        </div>
                    </div>
                </div>-->
            </div>
        </div>
    </div>
</nav>


    <div class="container-fluid">
        <section class="main-content">
            


<aside class="doku-sidebar" id="doku-sidebar">
    <div class="doku-sidebar-content">
        <div class="menu">
            
                <ul class="menu-list is-hidden-desktop">
                    
                        
                            <li><a href="/">OpenCore 参考手册(简体中文)</span></a></li>
                        
                    
                        
                            <li><a href="/search.html">站内搜索</span></a></li>
                        
                    
                        
                            <li><a href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">GitHub</span></a></li>
                        
                    
                </ul>
            
            <hr class="is-hidden-desktop">
            
                
                    <ul class="menu-list">
                        
                            <li><a  href="/">0. 首页</a></li>
                        
                            <li><a  href="/1-introduction.html">1. 简介</a></li>
                        
                            <li><a  href="/2-configuration.html">2. 配置</a></li>
                        
                            <li><a  href="/3-setup.html">3. Setup</a></li>
                        
                            <li><a  href="/4-acpi.html">4. ACPI</a></li>
                        
                            <li><a  href="/5-booter.html">5. Booter</a></li>
                        
                            <li><a  href="/6-device-properties.html">6. DeviceProperties</a></li>
                        
                            <li><a  href="/7-kernel.html">7. Kernel</a></li>
                        
                            <li><a  href="/8-misc.html">8. Misc</a></li>
                        
                            <li><a class="is-current" href="/9-nvram.html">9. NVRAM</a></li>
                        
                            <li><a  href="/10-platform-info.html">10. PlatformInfo</a></li>
                        
                            <li><a  href="/11-uefi.html">11. UEFI</a></li>
                        
                            <li><a  href="/12-troubleshooting.html">12. 排错</a></li>
                        
                            <li><a  href="/kextlist.html">附录 1. OpenCore 兼容 Kext 列表</a></li>
                        
                    </ul>
                
            
        </div>
    </div>
</aside>

            <main class="is-paddingless doku-main-wrapper" id="doku-main">
                

<article class="doku-document-container clearfix">
    <header class="hero is-light" id="doku-document-hero">
        <div class="hero-body">
            <h1 class="title">9. NVRAM</h1>
            
                <p class="subtitle">NVRAM 注入（如引导标识符和 SIP）（待翻译）</p>
            
            
                
                    <p><small>由 xMuu、Sukka 整理，由 Sukka 翻译</small></p>
                
                
                    <p><small>本页面最后更新于 2020 年 03 月 18 日</small></p>
                
                <br>
            
            
                <a href="https://github.com/sukkaw/OpenCore-Document-zh_Hans/tree/master/source/9-nvram.md" target="_blank" rel="external nofollow noreferrer noopener" class="button is-small is-rounded is-black"><span class="icon is-small"><i class="fab fa-github"></i></span><span>在 GitHub 上编辑</span></a>
            
        </div>
    </header>
    <div class="columns">
        <div class="column is-9-tablet doku-document-wrapper">
            <div class="content">
                <h2 id="9-1-Introduction"><a href="#9-1-Introduction" class="headerlink" title="9.1 Introduction"></a>9.1 Introduction</h2><p>设置易失性 UEFI 变量（通常被称作 NVRAM 变量），数据类型为 <code>plist dict</code>。使用 <code>man nvram</code> 获取详细信息。macOS 广泛使用 NVRAM 变量使 操作系统、BootLoader、固件 之间互通，因此需要提供多个 NVRAM 变量才能正常运行 macOS。</p>
<p>每个 NVRAM 变量均由其名称、值、属性（参考 UEFI 规范）以及 <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" rel="noopener">GUID</a> 组成，表示 NVRAM 变量属于哪一区域。macOS 使用如下（包括但不限于）几种 GUID：</p>
<ul>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14</code> (<code>APPLE_VENDOR_VARIABLE_GUID</code>)</li>
<li><code>7C436110-AB2A-4BBB-A880-FE41995C9F82</code> (<code>APPLE_BOOT_VARIABLE_GUID</code>)</li>
<li><code>8BE4DF61-93CA-11D2-AA0D-00E098032B8C</code> (<code>EFI_GLOBAL_VARIABLE_GUID</code>)</li>
<li><code>4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102</code> (<code>OC_VENDOR_VARIABLE_GUID</code>)</li>
</ul>
<p><em>注</em>：某些变量可以通过 <code>PlatformNVRAM</code> 或 <code>PlatformInfo</code> 节的 <code>Generic</code> 子节添加。请确保本节中的变量不会与它们发生冲突，否则可能导致未定义的行为。</p>
<p>为了使 macOS 正常运行，通常需要使用 <code>OC_FIRMWARE_RUNTIME</code> 协议。该协议的实现目前是 <code>OpenRuntime</code>（原名 <code>FwRuntimeServices.efi</code>）驱动程序的一部分。虽然可能带来一些好处，但根据用途不同也会存在某些限制。</p>
<ul>
<li>并非所有工具都可能知道受保护的名称空间。当使用 <code>RequestBootVarRouting</code> 时，在独立的命名空间中会限制对 <code>Boot</code> 前缀的变量访问。要访问原始变量，工具必须了解 <code>OC_FIRMWARE_RUNTIME</code> 协议的工作原理。</li>
<li>分配的 NVRAM 变量并非总是允许超过 512 个字节。当使用 <code>RequestBootVarFallback</code> 时，对于带有 <code>Boot</code> 前缀的变量，以及不符合 UEFI 2.8 规范的固件上使用非易失性覆盖变量，都存在 512 字节限制。</li>
</ul>
<h2 id="9-2-Properties"><a href="#9-2-Properties" class="headerlink" title="9.2 Properties"></a>9.2 Properties</h2><h3 id="1-Add"><a href="#1-Add" class="headerlink" title="1. Add"></a>1. <code>Add</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Description</strong>: Sets NVRAM variables from a map (<code>plist dict</code>) of GUIDs to a map (<code>plist dict</code>) of variable names and their values in <code>plist metadata</code> format. GUIDs must be provided in canonic string format in upper or lower case (e.g. <code>8BE4DF61-93CA-11D2-AA0D-00E098032B8C</code>).</p>
<p>Created variables get <code>EFI_VARIABLE_BOOTSERVICE_ACCESS</code> and <code>EFI_VARIABLE_RUNTIME_ACCESS</code> attributes set. Variables will only be set if not present and not blocked. To overwrite a variable add it to <code>Block</code> section. This approach enables to provide default values till the operating system takes the lead.</p>
<p><em>注</em>：If <code>plist key</code> does not conform to GUID format, behaviour is undefined.</p>
<h3 id="2-Block"><a href="#2-Block" class="headerlink" title="2. Block"></a>2. <code>Block</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Description</strong>: Removes NVRAM variables from a map (<code>plist dict</code>) of GUIDs to an array (<code>plist array</code>) of variable names in <code>plist string</code> format.</p>
<h3 id="3-LegacyEnable"><a href="#3-LegacyEnable" class="headerlink" title="3. LegacyEnable"></a>3. <code>LegacyEnable</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 允许从 ESP 分区的根目录中的 <code>nvram.plist</code> 文件读取 NVRAM 变量。</p>
<p>This file must have root <code>plist dictionary</code> type and contain two fields:</p>
<ul>
<li><code>Version</code> — <code>plist integer</code>, file version, must be set to 1.</li>
<li><code>Add</code> — <code>plist dictionary</code>, equivalent to <code>Add</code> from <code>config.plist</code>.</li>
</ul>
<p>Variable loading happens prior to <code>Block</code> (and <code>Add</code>) phases. Unless <code>LegacyOverwrite</code> is enabled, it will not overwrite any existing variable. Variables allowed to be set must be specified in <code>LegacySchema</code>. Third-party scripts may be used to create <code>nvram.plist</code> file. An example of such script can be found in <code>Utilities</code>. The use of third-party scripts may require <code>ExposeSensitiveData</code> set to <code>0x3</code> to provide <code>boot-path</code> variable with OpenCore EFI partition UUID.</p>
<p><strong>警告</strong>: 这一功能非常危险，因为这将不受保护的数据传递给固件中的变量服务。只有你的硬件不提供硬件 NVRAM 或与之不兼容时才使用。</p>
<h3 id="4-LegacyOverwrite"><a href="#4-LegacyOverwrite" class="headerlink" title="4. LegacyOverwrite"></a>4. <code>LegacyOverwrite</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 允许用 <code>nvram.plist</code> 文件中的变量覆盖现有 NVRAM 中的变量。</p>
<p><em>注</em>：只有操作系统访问的到的变量会被覆盖。</p>
<h3 id="5-LegacySchema"><a href="#5-LegacySchema" class="headerlink" title="5. LegacySchema"></a>5. <code>LegacySchema</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Description</strong>: Allows setting select NVRAM variables from a map (<code>plist dict</code>) of GUIDs to an array (<code>plist array</code>) of variable names in <code>plist string</code> format.</p>
<p>You can use <code>*</code> value to accept all variables for select GUID.</p>
<p><strong>警告</strong>: Choose variables very carefully, as nvram.plist is not vaulted. For instance, do not put <code>boot-args</code> or <code>csr-active-config</code>, as this can bypass SIP.</p>
<h3 id="6-WriteFlash"><a href="#6-WriteFlash" class="headerlink" title="6. WriteFlash"></a>6. <code>WriteFlash</code></h3><p> <strong>Type</strong>: <code>plist boolean</code><br> <strong>Failsafe</strong>: <code>false</code><br> <strong>Description</strong>: Enables writing to flash memory for all added variables.</p>
<p> <em>注</em>：This value is recommended to be enabled on most firmwares, but is left configurable for firmwares that may have issues with NVRAM variable storage garbage collection or alike.</p>
<p>To read NVRAM variable value from macOS one could use <code>nvram</code> by concatenating variable GUID and name separated by <code>:</code> symbol. For example, <code>nvram 7C436110-AB2A-4BBB-A880-FE41995C9F82:boot-args</code>.</p>
<p>A continuously updated variable list can be found in a corresponding document: <a href="https://docs.google.com/spreadsheets/d/1HTCBwfOBkXsHiK7os3b2CUc6k68axdJYdGl-TyXqLu0" target="_blank" rel="noopener">NVRAM Variables</a>.</p>
<h2 id="9-3-Mandatory-Variables"><a href="#9-3-Mandatory-Variables" class="headerlink" title="9.3 Mandatory Variables"></a>9.3 Mandatory Variables</h2><p><em>警告</em>: These variables may be added by <a href="">PlatformNVRAM</a> or <a href="">Generic</a> subsections of <a href="">PlatformInfo</a> section. Using <code>PlatformInfo</code> is the recommend way of setting these variables.</p>
<p>The following variables are mandatory for macOS functioning:</p>
<ul>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:FirmwareFeatures</code><br>32-bit <code>FirmwareFeatures</code>. Present on all Macs to avoid extra parsing of SMBIOS tables</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:FirmwareFeaturesMask</code><br>32-bit <code>FirmwareFeaturesMask</code>. Present on all Macs to avoid extra parsing of SMBIOS tables.</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:MLB</code><br><code>BoardSerialNumber</code>. Present on newer Macs (2013+ at least) to avoid extra parsing of SMBIOS tables, especially in <code>boot.efi</code>.</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:ROM</code><br>Primary network adapter MAC address or replacement value. Present on newer Macs (2013+ at least) to avoid accessing special memory region, especially in <code>boot.efi</code>.</li>
</ul>
<h2 id="9-4-Recommended-Variables"><a href="#9-4-Recommended-Variables" class="headerlink" title="9.4 Recommended Variables"></a>9.4 Recommended Variables</h2><p>The following variables are recommended for faster startup or other improvements:</p>
<ul>
<li><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:csr-active-config</code><br>32-bit System Integrity Protection bitmask. Declared in XNU source code in <a href="https://opensource.apple.com/source/xnu/xnu-4570.71.2/bsd/sys/csr.h.auto.html" target="_blank" rel="noopener">csr.h</a>.</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:ExtendedFirmwareFeatures</code><br>Combined <code>FirmwareFeatures</code> and <code>ExtendedFirmwareFeatures</code>. Present on newer Macs to avoid extra parsing of SMBIOS tables</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:ExtendedFirmwareFeaturesMask</code><br>Combined <code>FirmwareFeaturesMask</code> and <code>ExtendedFirmwareFeaturesMask</code>. Present on newer Macs to avoid extra parsing of SMBIOS tables.</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:HW_BID</code><br>Hardware <code>BoardProduct</code> (e.g. <code>Mac-35C1E88140C3E6CF</code>). Not present on real Macs, but used to avoid extra parsing of SMBIOS tables, especially in <code>boot.efi</code>.</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:HW_MLB</code><br>Hardware <code>BoardSerialNumber</code>. Override for MLB. Present on newer Macs (2013+ at least).</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:HW_ROM</code><br>Hardware ROM. Override for ROM. Present on newer Macs (2013+ at least).</li>
<li><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:prev-lang:kbd</code><br>ASCII string defining default keyboard layout. Format is <code>lang-COUNTRY:keyboard</code>, e.g. <code>ru-RU:252</code> for Russian locale and ABC keyboard. Also accepts short forms: <code>ru:252</code> or <code>ru:0</code> (U.S. keyboard, compatible with 10.9). Full decoded keyboard list from <code>AppleKeyboardLayouts-L.dat</code> can be found <a href="https://github.com/acidanthera/OpenCorePkg/tree/master/Utilities/AppleKeyboardLayouts" target="_blank" rel="noopener">here</a>. Using non-latin keyboard on 10.14 will not enable ABC keyboard, unlike previous and subsequent macOS versions, and is thus not recommended in case you need 10.14.</li>
<li><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:security-mode</code><br>ASCII string defining FireWire security mode. Legacy, can be found in IOFireWireFamily source code in <a href="https://opensource.apple.com/source/IOFireWireFamily/IOFireWireFamily-473/IOFireWireFamily.kmodproj/IOFireWireController.cpp.auto.html" target="_blank" rel="noopener">IOFireWireController.cpp</a>. It is recommended not to set this variable, which may speedup system startup. Setting to <code>full</code> is equivalent to not setting the variable and <code>none</code> disables FireWire security.</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:UIScale</code><br>One-byte data defining <code>boot.efi</code> user interface scaling. Should be <strong>01</strong> for normal screens and <strong>02</strong> for HiDPI screens.</li>
<li><code>4D1EDE05-38C7-4A6A-9CC6-4BCCA8B38C14:DefaultBackgroundColor</code> Four-byte <code>RGBA</code> data defining <code>boot.efi</code> user interface background colour. Standard colours include <code>BF BF BF 00</code> (Light Gray) and <code>00 00 00 00}</code> (Syrah Black). Other colours may be set at user’s preference.</li>
</ul>
<h2 id="9-5-Other-Variables"><a href="#9-5-Other-Variables" class="headerlink" title="9.5 Other Variables"></a>9.5 Other Variables</h2><p>以下变量对于某些特定的配置或进行故障排除可能会很有用：</p>
<ul>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:boot-args</code> 内核参数，用于将配置传递给 Apple 内核和驱动程序。很多参数可以通过在内核或驱动程序代码中寻找 <code>PE_parse_boot_argn</code> 函数找到。已知的引导参数包括：</p>
<ul>
<li><code>acpi_layer=0xFFFFFFFF</code></li>
<li><code>acpi_level=0xFFFF5F</code> (implies <a href="https://github.com/acpica/acpica/blob/master/source/include/acoutput.h" target="_blank" rel="noopener"><code>ACPI_ALL_COMPONENTS</code></a>)</li>
<li><code>batman=VALUE</code> — <code>AppleSmartBatteryManager</code> 调试掩码</li>
<li><code>batman-nosmc=1</code> — 禁用 <code>AppleSmartBatteryManager</code> SMC 表面</li>
<li><code>cpus=VALUE</code> — 最大可用 CPU 数量</li>
<li><code>debug=VALUE</code> — Debug 掩码</li>
<li><code>io=VALUE</code> — <code>IOKit</code> 调试掩码</li>
<li><code>keepsyms=1</code> (show panic log debug symbols)</li>
<li><code>kextlog=VALUE</code> — Kext 调试掩码</li>
<li><code>nv_disable=1</code> — 禁用 NVIDIA GPU 加速</li>
<li><code>nvda_drv=1</code> — 启用 NVIDIA web driver 的传统方法，这一参数在 macOS 10.12 中被去除</li>
<li><code>npci=0x2000</code> (<a href="https://www.insanelymac.com/forum/topic/260539-1068-officially-released/?do=findComment&comment=1707972" target="_blank" rel="noopener">legacy</a>, disables <code>kIOPCIConfiguratorPFM64</code>)</li>
<li><code>lapic_dont_panic=1</code></li>
<li><code>slide=VALUE</code> — 手动设置 KASLR 偏移值</li>
<li><code>smcdebug=VALUE</code> — <code>AppleSMC</code> 调试掩码</li>
<li><code>-amd_no_dgpu_accel</code> (alternative to <a href="https://github.com/acidanthera/WhateverGreen" target="_blank" rel="noopener">WhateverGreen</a>‘s <code>-radvesa</code> for new GPUs)</li>
<li><code>-nehalem_error_disable</code></li>
<li><code>-no_compat_check</code> (disable model checking)</li>
<li><code>-s</code> — 单用户模式</li>
<li><code>-v</code> — 啰嗦模式</li>
<li><code>-x</code> — 安全模式</li>
</ul>
<p>这里有一些网站收集了 macOS 内置的启动参数列表：<a href="https://osxeon.wordpress.com/2015/08/10/boot-argument-options-in-os-x" target="_blank" rel="noopener">列表 1</a>、<a href="https://superuser.com/questions/255176/is-there-a-list-of-available-boot-args-for-darwin-os-x" target="_blank" rel="noopener">列表 2</a>.</p>
</li>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:bootercfg</code><br>Booter arguments, similar to <code>boot-args</code> but for <code>boot.efi</code>. Accepts a set of arguments, which are hexadecimal 64-bit values with or without <code>0x</code>. At<br>different stages <code>boot.efi</code> will request different debugging (logging)<br>modes (e.g. after <code>ExitBootServices</code> it will only print to serial).<br>Several booter arguments control whether these requests will succeed.<br>The list of known requests is covered below:</p>
<ul>
<li><code>0x00</code> – <code>INIT</code>.</li>
<li><code>0x01</code> – <code>VERBOSE</code> (e.g. <code>-v</code>, force console logging).</li>
<li><code>0x02</code> – <code>EXIT</code>.</li>
<li><code>0x03</code> – <code>RESET:OK</code>.</li>
<li><code>0x04</code> – <code>RESET:FAIL</code> (e.g. unknown <code>board-id</code>, hibernate mismatch, panic loop, etc.).</li>
<li><code>0x05</code> – <code>RESET:RECOVERY</code>.</li>
<li><code>0x06</code> – <code>RECOVERY</code>.</li>
<li><code>0x07</code> – <code>REAN:START</code>.</li>
<li><code>0x08</code> – <code>REAN:END</code>.</li>
<li><code>0x09</code> – <code>DT</code> (can no longer log to DeviceTree).</li>
<li><code>0x0A</code> – <code>EXITBS:START</code> (forced serial only).</li>
<li><code>0x0B</code> – <code>EXITBS:END</code> (forced serial only).</li>
<li><code>0x0C</code> – <code>UNKNOWN</code>.</li>
</ul>
</li>
</ul>
<p>In 10.15 debugging support was mostly broken before 10.15.4 due to some kind of refactoring and introduction of a <a href="https://github.com/acidanthera/EfiPkg/blob/master/Include/Protocol/AppleDebugLog.h" target="_blank" rel="noopener">new debug protocol</a>. Some of the arguments and their values below may not be valid for<br>versions prior to 10.15.4. The list of known arguments is covered below:</p>
<ul>
<li><p><code>boot-save-log=VALUE</code> — debug log save mode for normal boot.</p>
<ul>
<li><code>0</code></li>
<li><code>1</code></li>
<li><code>2</code> — (default).</li>
<li><code>3</code></li>
<li><code>4</code> — (save to file).</li>
</ul>
</li>
<li><p><code>wake-save-log=VALUE</code> — debug log save mode for hibernation wake.</p>
<ul>
<li><code>0</code> — disabled.</li>
<li><code>1</code></li>
<li><code>2</code> — (default).</li>
<li><code>3</code> — (unavailable).</li>
<li><code>4</code> — (save to file, unavailable).</li>
</ul>
</li>
<li><p><code>breakpoint=VALUE</code> — enables debug breaks (missing in production<br><code>boot.efi</code>).</p>
<ul>
<li><code>0</code> — disables debug breaks on errors (default).</li>
<li><code>1</code> — enables debug breaks on errors.</li>
</ul>
</li>
<li><p><code>console=VALUE</code> — enables console logging.</p>
<ul>
<li><code>0</code> — disables console logging.</li>
<li><code>1</code> — enables console logging when debug protocol is missing<br>(default).</li>
<li><code>2</code> — enables console logging unconditionally (unavailable).</li>
</ul>
</li>
<li><p><code>embed-log-dt=VALUE</code> — enables DeviceTree logging.</p>
<ul>
<li><code>0</code> — disables DeviceTree logging (default).</li>
<li><code>1</code> — enables DeviceTree logging.</li>
</ul>
</li>
<li><p><code>kc-read-size=VALUE</code> — Chunk size used for buffered I/O from network<br>or disk for prelinkedkernel reading and related. Set to 1MB<br>(0x100000) by default, can be tuned for faster booting.</p>
</li>
<li><p><code>log-level=VALUE</code> — log level bitmask.</p>
<ul>
<li><code>0x01</code> — enables trace logging (default).</li>
</ul>
</li>
<li><p><code>serial=VALUE</code> — enables serial logging.</p>
<ul>
<li><code>0</code> — disables serial logging (default).</li>
<li><code>1</code> — enables serial logging for <code>EXITBS:END</code> onwards.</li>
<li><code>1</code> — enables serial logging for <code>EXITBS:START</code> onwards.</li>
<li><code>3</code> — enables serial logging when debug protocol is missing.</li>
<li><code>4</code> — enables serial logging unconditionally.</li>
</ul>
</li>
<li><p><code>timestamps=VALUE</code> — enables timestamp logging.</p>
<ul>
<li><code>0</code> — disables timestamp logging.</li>
<li><code>1</code> — enables timestamp logging (default).</li>
</ul>
</li>
<li><p><code>log=VALUE</code> — deprecated starting from 10.15.</p>
<p><em>注</em>：To see verbose output from <code>boot.efi</code> on modern macOS versions enable <code>AppleDebug</code> option. This will save the log to general OpenCore log. For versions before 10.15.4 set <code>bootercfg</code> to <code>log=1</code>. This will print verbose output onscreen.</p>
</li>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:efiboot-perf-record</code><br>Enable performance log saving in <code>boot.efi</code>. Performance log is saved to physical memory and is pointed by <code>efiboot-perf-record-data</code> and <code>efiboot-perf-record-size</code> variables. Starting from 10.15.4 it can also be saved to OpenCore log by <code>AppleDebug</code> option.</p>
</li>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:bootercfg-once</code><br>Booter arguments override removed after first launch. Otherwise equivalent to <code>bootercfg</code>.</p>
</li>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:fmm-computer-name</code><br>Current saved host name. ASCII string.</p>
</li>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:nvda_drv</code><br>NVIDIA Web Driver control variable. Takes ASCII digit <code>1</code> or <code>0</code> to enable or disable installed driver.</p>
</li>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:StartupMute</code><br>开机时禁用固件引导提示音。8 进制整数。<code>0x00</code> 指代不静音、其他任何值（或缺少该值）表示静音。这一选项只影响带 T2 的机器。</p>
</li>
<li><p><code>7C436110-AB2A-4BBB-A880-FE41995C9F82:SystemAudioVolume</code><br>System audio volume level for firmware audio support. 8-bit integer. The bit of <code>0x80</code> means muted. Lower bits are used to encode volume range specific to installed audio codec. The value is capped by <code>MaximumBootBeepVolume</code> AppleHDA layout value to avoid too loud audio playback in the firmware.</p>
</li>
</ul>

            </div>

            <ul class="doku-pagination">
            <li class="page-item page-prev">
                <a href="/8-misc.html">
                    <div class="page-item-subtitle"><span class="icon is-small"><i class="fas fa-arrow-left"></i></span> <span>前一页</span></div>
                    <div class="page-item-title h5">8. Misc</div>
                </a>
            </li>
            <li class="page-item page-next">
                <a href="/10-platform-info.html">
                    <div class="page-item-subtitle"><span>后一页</span> <span class="icon is-small"><i class="fas fa-arrow-right"></i></span></div>
                    <div class="page-item-title h5">10. PlatformInfo</div>
                </a>
            </li></ul>
        </div>
        
        <div class="column is-3 is-narrow-touch is-hidden-mobile">
            <aside class="doku-document-toc" id="doku-document-toc">
                <div class="doku-document-toc-content">
                    <p class="doku-document-toc-title">目录</p>
                    <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-1-Introduction"><span class="post-toc-text">9.1 Introduction</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-2-Properties"><span class="post-toc-text">9.2 Properties</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Add"><span class="post-toc-text">1. Add</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Block"><span class="post-toc-text">2. Block</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-LegacyEnable"><span class="post-toc-text">3. LegacyEnable</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-LegacyOverwrite"><span class="post-toc-text">4. LegacyOverwrite</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-LegacySchema"><span class="post-toc-text">5. LegacySchema</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-WriteFlash"><span class="post-toc-text">6. WriteFlash</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-3-Mandatory-Variables"><span class="post-toc-text">9.3 Mandatory Variables</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-4-Recommended-Variables"><span class="post-toc-text">9.4 Recommended Variables</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#9-5-Other-Variables"><span class="post-toc-text">9.5 Other Variables</span></a></li></ol>
                </div>
            </aside>
        </div>
        
    </div>
</article>

                <footer>
    <div class="doku-footer-container is-clearfix">
        <div class="doku-footer-item is-pulled-left">&copy; <span id="doku-copyrght-year"></span> <a href="/">OpenCore 简体中文参考手册(非官方)</a></div>

        <div class="doku-footer-item is-pulled-right">Powered by <a href="https://hexo.io" target="_blank" rel="external noopenner nofollow">Hexo</a> & <a href="https://github.com/SukkaW/hexo-theme-doku" target="_blank" rel="external noopenner nofollow">Doku</a></div>
    </div>
</footer>

            </main>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/stickyfilljs@2.1.0/dist/stickyfill.min.js"></script>
    <script src="/theme-doku/js/doku.js"></script>
</body>

</html>
