<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
<title>12. 排错 | OpenCore 简体中文参考手册(非官方)</title>
<meta name="generator" content="Hexo 4.2.0">
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="description" content="由 Sukka 和黑苹果爱好者们维护的 OpenCore 文档简体中文翻译，实时更新 OpenCore 上游文档改动。努力提供权威的 OpenCore 简体中文参考资料。">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/logo/favicon.ico">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/github.min.css">
<link rel="stylesheet" href="/theme-doku/css/doku.css">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

</head>

<body>
    

<nav id="doku-navbar" class="navbar is-spaced has-shadow">
    <div class="container">
        <div class="navbar-brand">
            <!-- burger btn -->
            <a role="button" class="navbar-burger burger" id="doku-sidebar-toggle">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>

            <a class="navbar-item" href="https://oc.skk.moe">
                <h1 class="doku-navbar-title">
                    <img src="/logo/navbar.png" height="28">
                    <span class="is-size-4"></span>
                </h1>
            </a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-start">
                
                    <a class="navbar-item" href="/">
                        
                        
                            <span>OpenCore 参考手册(简体中文)</span>
                        
                    </a>
                
                    <a class="navbar-item" href="/search.html">
                        
                            <span class="icon">
                                <i class="fas fa-search"></i>
                            </span>
                        
                        
                            <span>站内搜索</span>
                        
                    </a>
                
                    <a class="navbar-item" href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">
                        
                            <span class="icon">
                                <i class="fab fa-github"></i>
                            </span>
                        
                        
                            <span>GitHub</span>
                        
                    </a>
                
                <!-- navbar link -->
                <!--<a class="navbar-item">
                Home
            </a>-->
            </div>
            <!-- i18n switch -->
            <div class="navbar-end">
                <!--<div class="navbar-item">
                    <div class="dropdown is-right is-hoverable">
                        <div class="dropdown-trigger">
                            <button class="button" id="navbar-i18n-btn">
                                <span class="icon is-small">
                                    <i class="fas fa-globe-americas" aria-hidden="true"></i>
                                </span>
                                <span>Language</span>
                                <span class="icon is-small">
                                    <i class="fas fa-angle-down" aria-hidden="true"></i>
                                </span>
                            </button>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-content">
                                <a href="#" class="dropdown-item">
                                    Dropdown item
                                </a>
                                <a class="dropdown-item">
                                    Other dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Active dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Other dropdown item
                                </a>
                            </div>
                        </div>
                    </div>
                </div>-->
            </div>
        </div>
    </div>
</nav>


    <div class="container-fluid">
        <section class="main-content">
            


<aside class="doku-sidebar" id="doku-sidebar">
    <div class="doku-sidebar-content">
        <div class="menu">
            
                <ul class="menu-list is-hidden-desktop">
                    
                        
                            <li><a href="/">OpenCore 参考手册(简体中文)</span></a></li>
                        
                    
                        
                            <li><a href="/search.html">站内搜索</span></a></li>
                        
                    
                        
                            <li><a href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">GitHub</span></a></li>
                        
                    
                </ul>
            
            <hr class="is-hidden-desktop">
            
                
                    <ul class="menu-list">
                        
                            <li><a  href="/">0. 首页</a></li>
                        
                            <li><a  href="/1-introduction.html">1. 简介</a></li>
                        
                            <li><a  href="/2-configuration.html">2. 配置</a></li>
                        
                            <li><a  href="/3-setup.html">3. Setup</a></li>
                        
                            <li><a  href="/4-acpi.html">4. ACPI</a></li>
                        
                            <li><a  href="/5-booter.html">5. Booter</a></li>
                        
                            <li><a  href="/6-device-properties.html">6. DeviceProperties</a></li>
                        
                            <li><a  href="/7-kernel.html">7. Kernel</a></li>
                        
                            <li><a  href="/8-misc.html">8. Misc</a></li>
                        
                            <li><a  href="/9-nvram.html">9. NVRAM</a></li>
                        
                            <li><a  href="/10-platform-info.html">10. PlatformInfo</a></li>
                        
                            <li><a  href="/11-uefi.html">11. UEFI</a></li>
                        
                            <li><a class="is-current" href="/12-troubleshooting.html">12. 排错</a></li>
                        
                            <li><a  href="/kextlist.html">附录 1. OpenCore 兼容 Kext 列表</a></li>
                        
                    </ul>
                
            
        </div>
    </div>
</aside>

            <main class="is-paddingless doku-main-wrapper" id="doku-main">
                

<article class="doku-document-container clearfix">
    <header class="hero is-light" id="doku-document-hero">
        <div class="hero-body">
            <h1 class="title">12. 排错</h1>
            
                <p class="subtitle">Troubleshooting</p>
            
            
                
                    <p><small>由 xMuu 整理，由 Sukka 翻译</small></p>
                
                
                    <p><small>本页面最后更新于 2020 年 02 月 12 日</small></p>
                
                <br>
            
            
                <a href="https://github.com/sukkaw/OpenCore-Document-zh_Hans/tree/master/source/12-troubleshooting.md" target="_blank" rel="external nofollow noreferrer noopener" class="button is-small is-rounded is-black"><span class="icon is-small"><i class="fab fa-github"></i></span><span>在 GitHub 上编辑</span></a>
            
        </div>
    </header>
    <div class="columns">
        <div class="column is-9-tablet doku-document-wrapper">
            <div class="content">
                <h2 id="12-1-Windows-支持"><a href="#12-1-Windows-支持" class="headerlink" title="12.1 Windows 支持"></a>12.1 Windows 支持</h2><h3 id="我能安装-Windows-系统吗？"><a href="#我能安装-Windows-系统吗？" class="headerlink" title="我能安装 Windows 系统吗？"></a>我能安装 Windows 系统吗？</h3><p>虽然 OpenCore 并没有提供官方的 Windows 支持，但是使用 Boot Camp 安装 64 位 UEFI Windows（即 Windows 8 及更高版本）应该是可以正常工作的。安装第三方 UEFI、或者仅部分支持 UEFI 引导的系统（如 Windows 7）可能需要额外注意。不论如何，记住以下几点：</p>
<ul>
<li>MBR (Master Boot Record) 属于 Legacy 引导，因此将不会被支持。</li>
<li>在同一块硬盘上安装 Windows、macOS 和 OpenCore 时，你可以在 <code>BlessOverride</code> 部分中指定 Windows Bootloader 的路径（<code>\EFI\Microsoft\Boot\bootmgfw.efi</code>）。</li>
<li>在 OpenCore 上应用的所有更改（ACPI、NVRAM、SMBIOS）都应该与操作系统本身无关。OpenCore 会将这些改动生效于所有操作系统，这样在 Windows 上可以获得 Boot Camp 的体验。</li>
<li>macOS 要求硬盘中的第一份分区为 EFI 分区，并且与 Windows 的默认布局不支持。尽管 OpenCore 确实提供了一个 <a href="https://github.com/acidanthera/bugtracker/issues/327" target="_blank" rel="noopener">解决方法</a>，但是强烈建议不要依赖这个方法。</li>
<li>Windows 系统可能需要重新激活。为了避免这种情况发生，请考虑将 SystemUUID 设置为原始固件的 UUID。请注意，在旧固件上 UUID 可能是无效的（非随机的）。如果你还遇到了什么问题，可以考虑使用 HWID 或 KMS38 的 Windows 许可证。Windows 激活的细节不在本文档的讨论范围内，你应该能够在网上查找到相关资料。</li>
</ul>
<h3 id="我需要安装其他什么软件吗？"><a href="#我需要安装其他什么软件吗？" class="headerlink" title="我需要安装其他什么软件吗？"></a>我需要安装其他什么软件吗？</h3><p>在大多数情况下，要启用多操作系统切换、安装相关驱动程序，你将需要 <a href="https://support.apple.com/boot-camp" target="_blank" rel="noopener">Boot Camp</a> 提供的 Windows 支持软件。为了简化下载过程、或者配置硬盘中已经安装好的 Windows，可以使用 <a href="https://github.com/timsutton/brigadier" target="_blank" rel="noopener">Brigadier</a> 这个实用软件。请注意在使用 Brigadier 之前，你可能需要先下载并安装 <a href="https://www.7-zip.org" target="_blank" rel="noopener">7-Zip</a>。</p>
<blockquote>
<p>译者注：<a href="https://sparanoid.com/lab/7z/" target="_blank" rel="noopener">7-zip 官方中文网站</a></p>
</blockquote>
<p>记住，一定要使用最新版本的 Boot Camp 的 Windows 支持软件。6.1 之前的版本不支持 APFS 文件系统、因此无法运行。要下载最新的软件，请将最新 Mac 的型号作为参数传递给 Brigadier，如 <code>./brigadier.exe -m iMac19,1</code>。之后，在不受支持的 Mac 型号上安装 Boot Camp，请以管理员身份运行 PowerShell，输入 <code>msiexec /i BootCamp.msi</code> 即可。如果你之前不小心已经安装了旧版本的 Boot Camp，则必须先通过运行 <code>msiexec /x BootCamp.msi</code> 将其卸载。<code>BootCamp.msi</code> 文件位于 <code>BootCamp/Drivers/Apple</code> 目录中、可以通过资源管理器访问。</p>
<blockquote>
<p>译者注：在资源管理器下，按住 <kbd>Shift</kbd> 同时右击窗口中空白处，此时菜单中会显示「在此处运行 PowerShell」，即在当前目录下运行 PowerShell。但是这种方式启动的 PowerShell 不具备管理员权限。</p>
</blockquote>
<p>尽管 Boot Camp 提供的 Windows 支持软件解决了大多数兼容性问题，但是有时候您还是需要手动解决一些问题：</p>
<ul>
<li>要反转鼠标滚轮的滚动方向，必须按照 <a href="https://superuser.com/a/364353" target="_blank" rel="noopener">这个网站</a> 提供的方法、设置 <code>FlipFlopWheel</code> 的值为 <code>1</code>。</li>
</ul>
<blockquote>
<p>译者注：<br>涉及到的注册表是 <code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\HID\VID_???\VID_???\Device Parameters.</code><br>你可以在 PowerShell 中执行下述命令进行设置；</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 获取当前设置</span><br><span class="hljs-built_in">Get-ItemProperty</span> HKLM:\SYSTEM\CurrentControlSet\<span class="hljs-class"><span class="hljs-keyword">Enum</span>\<span class="hljs-title">HID</span>\*\*\<span class="hljs-title">Device</span>` <span class="hljs-title">Parameters</span> <span class="hljs-title">FlipFlopWheel</span> -<span class="hljs-title">EA</span> 0<br># 修改设置<br># 鼠标滚动方向 相反 <span class="hljs-title">FlipFlopWheel</span> 1<br># 鼠标滚动方向 自然滚动 <span class="hljs-title">FlipFlopWheel</span> 0<br><span class="hljs-title">Get</span>-<span class="hljs-title">ItemProperty</span> <span class="hljs-title">HKLM</span>:\<span class="hljs-title">SYSTEM</span>\<span class="hljs-title">CurrentControlSet</span>\<span class="hljs-title">Enum</span>\<span class="hljs-title">HID</span>\*\*\<span class="hljs-title">Device</span>` <span class="hljs-title">Parameters</span> <span class="hljs-title">FlipFlopWheel</span> -<span class="hljs-title">EA</span> 0 | <span class="hljs-title">ForEach</span>-<span class="hljs-title">Object</span></span> &#123; <span class="hljs-built_in">Set-ItemProperty</span> <span class="hljs-variable">$_</span>.PSPath FlipFlopWheel <span class="hljs-number">1</span> &#125;<br></code></pre></td></tr></table></figure>

<p>如果需要撤销更改，可以使用下述命令：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 恢复鼠标滚动方向</span><br><span class="hljs-built_in">Get-ItemProperty</span> HKLM:\SYSTEM\CurrentControlSet\<span class="hljs-class"><span class="hljs-keyword">Enum</span>\<span class="hljs-title">HID</span>\*\*\<span class="hljs-title">Device</span>` <span class="hljs-title">Parameters</span> <span class="hljs-title">FlipFlopWheel</span> -<span class="hljs-title">EA</span> 1 | <span class="hljs-title">ForEach</span>-<span class="hljs-title">Object</span></span> &#123; <span class="hljs-built_in">Set-ItemProperty</span> <span class="hljs-variable">$_</span>.PSPath FlipFlopWheel <span class="hljs-number">0</span> &#125;<br></code></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><code>RealTimeIsUniversal</code> 必须设置为 <code>1</code> 以避免 Windows 和 macOS 之间的时间不同步。</li>
</ul>
<blockquote>
<p>译者注：众所周知，Windows 将硬件时间视为本地时间，而 macOS 会计算 UTC 后当做系统时间。通过修改上述提到的注册表值，可以让 Windows 将硬件时间视为 UTC 时间。用到的 CMD 命令如下所示：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
</blockquote>
<ul>
<li>如果要访问 Apple 的文件系统（APFS、HFS），你可能需要安装单独的软件。已知的工具有 <a href="https://forums.macrumors.com/threads/apple-hfs-windows-driver-download.1368010/" target="_blank" rel="noopener">Apple HFS+ driver</a> (<a href="https://forums.macrumors.com/threads/apple-hfs-windows-driver-download.1368010/post-24180079" target="_blank" rel="noopener">hack for Windows 10</a>)、<a href="http://www.catacombae.org/hfsexplorer" target="_blank" rel="noopener">HFSExplorer</a>、MacDrive、Paragon APFS、Paragon HFS+、TransMac，等等。</li>
</ul>
<blockquote>
<p>译者注：<strong>切记不要在 Windows 下写入 APFS 或 HFS，十有八九你会导致分区表错误和无法恢复的数据丢失。别怪我们没有警告过你！！</strong></p>
</blockquote>
<h3 id="为什么我会在-Boot-Camp-启动硬盘-控制面板-中看到-Basic-data-partition？"><a href="#为什么我会在-Boot-Camp-启动硬盘-控制面板-中看到-Basic-data-partition？" class="headerlink" title="为什么我会在 Boot Camp 启动硬盘 控制面板 中看到 Basic data partition？"></a>为什么我会在 Boot Camp 启动硬盘 控制面板 中看到 <code>Basic data partition</code>？</h3><p>Boot Camp 使用 GPT 分区表获取每个引导选项的名称。独立安装 Windows 后，你必须手动重新标记分区。这可以挺过许多工具完成，比如开源的 <a href="https://sourceforge.net/projects/gptfdisk" target="_blank" rel="noopener">gdisk</a>，使用方法如下：</p>
<blockquote>
<p><strong>Listing 3: Relabeling Windows volume</strong></p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs powershell">PS C:\gdisk&gt; .\gdisk64.exe \\.\physicaldrive0<br>GPT fdisk (gdisk) version <span class="hljs-number">1.0</span>.<span class="hljs-number">4</span><br><br>Command (? <span class="hljs-keyword">for</span> help): p<br>Disk \\.\physicaldrive0: <span class="hljs-number">419430400</span> sectors, <span class="hljs-number">200.0</span> GiB<br>Sector size (logical): <span class="hljs-number">512</span> bytes<br>Disk identifier (GUID): DEC57EB1<span class="hljs-literal">-B3B5</span><span class="hljs-literal">-49B2</span><span class="hljs-literal">-95F5</span><span class="hljs-literal">-3B8C4D3E4E12</span><br>Partition table holds up to <span class="hljs-number">128</span> entries<br>Main partition table begins at sector <span class="hljs-number">2</span> and ends at sector <span class="hljs-number">33</span><br>First usable sector is <span class="hljs-number">34</span>, last usable sector is <span class="hljs-number">419430366</span><br>Partitions will be aligned on <span class="hljs-number">2048</span><span class="hljs-literal">-sector</span> boundaries<br>Total free space is <span class="hljs-number">4029</span> sectors (<span class="hljs-number">2.0</span> MiB)<br><br>Number  Start (sector)    <span class="hljs-keyword">End</span> (sector)  Size       Code  Name<br>   <span class="hljs-number">1</span>            <span class="hljs-number">2048</span>         <span class="hljs-number">1023999</span>   <span class="hljs-number">499.0</span> MiB   <span class="hljs-number">2700</span>  Basic <span class="hljs-keyword">data</span> partition<br>   <span class="hljs-number">2</span>         <span class="hljs-number">1024000</span>         <span class="hljs-number">1226751</span>   <span class="hljs-number">99.0</span> MiB    EF00  EFI system partition<br>   <span class="hljs-number">3</span>         <span class="hljs-number">1226752</span>         <span class="hljs-number">1259519</span>   <span class="hljs-number">16.0</span> MiB    <span class="hljs-number">0</span>C01  Microsoft reserved ...<br>   <span class="hljs-number">4</span>         <span class="hljs-number">1259520</span>       <span class="hljs-number">419428351</span>   <span class="hljs-number">199.4</span> GiB   <span class="hljs-number">0700</span>  Basic <span class="hljs-keyword">data</span> partition<br><br>Command (? <span class="hljs-keyword">for</span> help): c<br>Partition number (<span class="hljs-number">1</span><span class="hljs-literal">-4</span>): <span class="hljs-number">4</span><br>Enter name: BOOTCAMP<br><br>Command (? <span class="hljs-keyword">for</span> help): w<br><br>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING PARTITIONS!!<br><br><span class="hljs-keyword">Do</span> you want to proceed? (Y/N): Y<br>OK; writing new GUID partition table (GPT) to \\.\physicaldrive0.<br>Disk synchronization succeeded! The computer should now use the new partition table.<br>The operation has completed successfully.<br></code></pre></td></tr></table></figure>

<h3 id="如何选择-NTFS-驱动程序"><a href="#如何选择-NTFS-驱动程序" class="headerlink" title="如何选择 NTFS 驱动程序"></a>如何选择 NTFS 驱动程序</h3><p>提供 NTFS 读写支持的第三方驱动程序，如 <a href="https://www.tuxera.com/community/open-source-ntfs-3g" target="_blank" rel="noopener">NTFS-3G</a>、Paragon NTFS、Tuxera NTFS 或 <a href="https://www.seagate.com/support/software/paragon" target="_blank" rel="noopener">希捷移动硬盘 Paragon 驱动程序</a> 会破坏 macOS 的功能，比如 系统偏好设置 中的 启动磁盘 选项。<br>虽然我们仍然不建议使用这些经常破坏文件系统的驱动程序（我们推荐使用 macOS 内建的 NTFS 读写支持，可以通过终端或 GUI 启用），但是这些驱动程序的厂商也提供了他们各自的解决方案，在这里我们仅列举两个：</p>
<ul>
<li><a href="https://www.tuxera.com/products/tuxera-ntfs-for-mac/faq" target="_blank" rel="noopener">Tuxera 的常见问题解答页面</a></li>
<li><a href="https://kb.paragon-software.com/article/6604" target="_blank" rel="noopener">Paragon 相关的技术支持文档</a></li>
</ul>
<h2 id="12-2-调试"><a href="#12-2-调试" class="headerlink" title="12.2 调试"></a>12.2 调试</h2><p>与其他硬件相关的项目类似，OpenCore 也支持审计与调试。使用 NOOPT 或 DEBUG 构建版本（而非 RELEASE 构建版本）可以产生更多的调试输出。对于 NOOPT 构建版本，你还可以使用 GDB 或 IDA Pro 进行调试。对于 GDB 请查看 <a href="https://github.com/acidanthera/OcSupportPkg/tree/master/Debug" target="_blank" rel="noopener">OcSupport Debug</a> 相关页面；对于 IDA Pro，你需要 7.3 或更高版本，更多详细信息请参考 IDA Pro 提供的页面：<a href="https://www.hex-rays.com/products/ida/support/tutorials/index.shtml" target="_blank" rel="noopener">Debugging the XNU Kernel with IDA Pro</a>。</p>
<p>To obtain the log during boot you can make the use of serial port debugging. Serial port debugging is enabled in <code>Target</code>, e.g. <code>0xB</code> for onscreen with serial. OpenCore uses <code>115200</code> baud rate, <code>8</code> data bits, no parity, and <code>1</code> stop bit. For macOS your best choice are CP2102-based UART devices. Connect motherboard <code>TX</code> to USB UART <code>RX</code>, and motherboard <code>GND</code> to USB UART <code>GND</code>. Use <code>screen</code> utility to get the output, or download GUI software, such as <a href="https://freeware.the-meiers.org" target="_blank" rel="noopener">CoolTerm</a>.</p>
<p><em>注释</em>: On several motherboards (and possibly USB UART dongles) PIN naming may be incorrect. It is very common to have <code>GND</code> swapped with <code>RX</code>, thus you have to connect motherboard <code>&quot;TX&quot;</code> to USB UART <code>GND</code>, and motherboard <code>&quot;GND&quot;</code> to USB UART <code>RX</code>.</p>
<p>Remember to enable <code>COM</code> port in firmware settings, and never use USB cables longer than 1 meter to avoid output corruption. To additionally enable XNU kernel serial output you will need <code>debug=0x8</code> boot argument.</p>
<h2 id="12-3-技巧和窍门"><a href="#12-3-技巧和窍门" class="headerlink" title="12.3 技巧和窍门"></a>12.3 技巧和窍门</h2><h3 id="1-啊呀呀呀我系统没法启动了我该怎么看日志啊？"><a href="#1-啊呀呀呀我系统没法启动了我该怎么看日志啊？" class="headerlink" title="1. 啊呀呀呀我系统没法启动了我该怎么看日志啊？"></a>1. 啊呀呀呀我系统没法启动了我该怎么看日志啊？</h3><p>通常情况下，获取实际的错误信息就足够了。为此，请确保：</p>
<ul>
<li>你正在使用 OpenCore 的 DEBUG 或 NOOPT 版本。</li>
<li>日志已启用（<code>1</code>）并且在屏幕上显示（<code>2</code>）：<code>Misc =&gt; Debug =&gt; Target = 3</code>.</li>
<li>将以下这些等级的日志输出到屏幕上：<code>DEBUG_ERROR</code> (<code>0x80000000</code>)、<code>DEBUG_WARN</code> (<code>0x00000002</code>) 和 <code>DEBUG_INFO</code> (<code>0x00000040</code>)：<code>Misc =&gt; Debug =&gt; DisplayLevel = 0x80000042</code>.</li>
<li>遇到 <code>DEBUG_ERROR</code> 这样的致命错误时中止启动：<code>Misc =&gt; Security =&gt; HaltLevel = 0x80000000</code>。</li>
<li>禁用 Watch Dog 以避免自动重启：<code>Misc =&gt; Debug =&gt; DisableWatchDog = true</code>。</li>
<li>已启用 启动菜单 显示：<code>Misc =&gt; Boot =&gt; ShowPicker = true</code></li>
</ul>
<p>如果你在日志中看不出明显的错误，请逐一检查 Quirks 部分中可用的 hacks。例如，对于 Early Boot 出现的问题（如 OpenCore 启动菜单无法显示），通过 <a href="https://github.com/acidanthera/OpenCoreShell" target="_blank" rel="noopener">UEFI Shell</a> 可以查看相关调试信息。</p>
<h3 id="2-如何自定义启动项？"><a href="#2-如何自定义启动项？" class="headerlink" title="2. 如何自定义启动项？"></a>2. 如何自定义启动项？</h3><p>OpenCore 遵循 Apple Bless 标准模型、从引导目录中的 <code>.contentDetails</code> 和 <code>.disk_label.contentDetails</code> 文件中提取条目名称。这些文件包含带有输入标题的 ASCII 字符串，你可以修改它们。</p>
<h3 id="3-如何选择默认启动的系统？"><a href="#3-如何选择默认启动的系统？" class="headerlink" title="3. 如何选择默认启动的系统？"></a>3. 如何选择默认启动的系统？</h3><p>OpenCore 使用 UEFI 首选启动项 来选择默认的启动项。设置的方式随 BIOS 不同而不同，具体请参考 macOS <a href="https://support.apple.com/HT202796" target="_blank" rel="noopener">启动磁盘</a> 或 Windows <a href="https://support.apple.com/guide/bootcamp-control-panel/start-up-your-mac-in-windows-or-macos-bcmp29b8ac66/mac" target="_blank" rel="noopener">Boot Camp</a> 控制面板。</p>
<p>由于使用 OpenCore 提供的 <code>BOOTx64.efi</code> 作为首选启动项会限制这项功能（可能还会导致一些固件删除不兼容的引导选项），我们强烈建议你修改 <code>RequestBootVarRouting</code> quirk，这会将你所做的选择保留在 OpenCore 变量空间中。请注意，<code>RequestBootVarRouting</code> 需要单独的 <code>.efi</code> 驱动文件。</p>
<h3 id="4-安装-macOS-最简单的方法是什么？"><a href="#4-安装-macOS-最简单的方法是什么？" class="headerlink" title="4. 安装 macOS 最简单的方法是什么？"></a>4. 安装 macOS 最简单的方法是什么？</h3><p>在线安装。将 Recovery 镜像（<code>*.dmg</code> 和 <code>*.chunklist</code> 文件）和 OpenCore 一起复制到一个 FAT32 分区中。加载 OpenCore 的启动菜单并选择后缀为 <code>.dmg</code> 的条目。如果你有强迫症，你可以修改 <code>.contentDetails</code> 文件改变条目显示的文字。</p>
<p>你可能会用到 <a href="https://github.com/acidanthera/MacInfoPkg/releases" target="_blank" rel="noopener">MacInfoPkg</a> 内置的 <a href="https://github.com/acidanthera/MacInfoPkg/blob/master/macrecovery/macrecovery.py" target="_blank" rel="noopener">macrecovery.py</a> 来下载 Recovery 镜像。</p>
<p>如果你需要进行离线安装，请参考 <a href="https://support.apple.com/HT201372" target="_blank" rel="noopener">How to create a bootable installer for macOS</a>。除了通过 App Store 或 系统更新，你还可以使用 <a href="https://github.com/corpnewt/gibMacOS" target="_blank" rel="noopener">第三方工具</a> 下载 macOS 镜像文件。</p>
<h3 id="5-为什么无法加载-Recovery-恢复镜像-进行在线安装？"><a href="#5-为什么无法加载-Recovery-恢复镜像-进行在线安装？" class="headerlink" title="5. 为什么无法加载 Recovery 恢复镜像 进行在线安装？"></a>5. 为什么无法加载 Recovery 恢复镜像 进行在线安装？</h3><p>可能是因为你没带 HFS+ 驱动。目前我们所知道的 Recovery 分区全都是 HFS+ 文件系统。</p>
<h3 id="6-我可以在-Apple-的硬件、或虚拟机中使用-OpenCore-吗？"><a href="#6-我可以在-Apple-的硬件、或虚拟机中使用-OpenCore-吗？" class="headerlink" title="6. 我可以在 Apple 的硬件、或虚拟机中使用 OpenCore 吗？"></a>6. 我可以在 Apple 的硬件、或虚拟机中使用 OpenCore 吗？</h3><p><del>可以，没有必要，但请加大力度</del></p>
<p>OpenCore 支持包括 MacPro 5,1 和虚拟机在内的大部分较新的 Mac 想好。不过，OpenCore有关在 Mac 硬件上使用的具体细节微乎其微。你可以在 <a href="https://github.com/acidanthera/bugtracker/issues/377" target="_blank" rel="noopener">acidanthera/bugtracker#377</a> 查看相关讨论。</p>
<h3 id="7-为什么-Find-和-Replace-的补丁的长度必须相等？"><a href="#7-为什么-Find-和-Replace-的补丁的长度必须相等？" class="headerlink" title="7. 为什么 Find 和 Replace 的补丁的长度必须相等？"></a>7. 为什么 Find 和 Replace 的补丁的长度必须相等？</h3><p>对于 x86 机器码来说，<a href="https://en.wikipedia.org/w/index.php?title=Relative_addressing" target="_blank" rel="noopener">相对寻址</a> 无法进行大小不同的替换。对于 ACPI 代码来说这是有风险的，而且在技术上这与替换 ACPI 表等价，所以 OpenCore 没有实现。更多详细的解答可以在 <a href="https://applelife.ru/posts/819790" target="_blank" rel="noopener">AppleLife.ru</a> 上找到。</p>
<h3 id="8-我如何从-AptioMemoryFix-迁移到-OpenCore"><a href="#8-我如何从-AptioMemoryFix-迁移到-OpenCore" class="headerlink" title="8. 我如何从 AptioMemoryFix 迁移到 OpenCore?"></a>8. 我如何从 <code>AptioMemoryFix</code> 迁移到 OpenCore?</h3><p>可以通过安装 <code>FwRuntimeServices.efi</code> 驱动程序并启用以下列出的 quirk 来获得与 <code>AptioMemoryFix</code> 类似的行为。 请注意，其中大多数功能都不需要启用。有关更多详细信息，请参阅本文档中关于它们的单独描述。</p>
<ul>
<li><code>ProvideConsoleGop</code> (UEFI quirk)</li>
<li><code>AvoidRuntimeDefrag</code></li>
<li><code>DiscardHibernateMap</code></li>
<li><code>EnableSafeModeSlide</code></li>
<li><code>EnableWriteUnprotector</code></li>
<li><code>ForceExitBootServices</code></li>
<li><code>ProtectCsmRegion</code></li>
<li><code>ProvideCustomSlide</code></li>
<li><code>SetupVirtualMap</code></li>
<li><code>ShrinkMemoryMap</code></li>
</ul>

            </div>

            <ul class="doku-pagination">
            <li class="page-item page-prev">
                <a href="/11-uefi.html">
                    <div class="page-item-subtitle"><span class="icon is-small"><i class="fas fa-arrow-left"></i></span> <span>前一页</span></div>
                    <div class="page-item-title h5">11. UEFI</div>
                </a>
            </li>
            <li class="page-item page-next">
                <a href="/kextlist.html">
                    <div class="page-item-subtitle"><span>后一页</span> <span class="icon is-small"><i class="fas fa-arrow-right"></i></span></div>
                    <div class="page-item-title h5">附录 1. OpenCore 兼容 Kext 列表</div>
                </a>
            </li></ul>
        </div>
        
        <div class="column is-3 is-narrow-touch is-hidden-mobile">
            <aside class="doku-document-toc" id="doku-document-toc">
                <div class="doku-document-toc-content">
                    <p class="doku-document-toc-title">目录</p>
                    <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-1-Windows-支持"><span class="post-toc-text">12.1 Windows 支持</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#我能安装-Windows-系统吗？"><span class="post-toc-text">我能安装 Windows 系统吗？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#我需要安装其他什么软件吗？"><span class="post-toc-text">我需要安装其他什么软件吗？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#为什么我会在-Boot-Camp-启动硬盘-控制面板-中看到-Basic-data-partition？"><span class="post-toc-text">为什么我会在 Boot Camp 启动硬盘 控制面板 中看到 Basic data partition？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何选择-NTFS-驱动程序"><span class="post-toc-text">如何选择 NTFS 驱动程序</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-2-调试"><span class="post-toc-text">12.2 调试</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#12-3-技巧和窍门"><span class="post-toc-text">12.3 技巧和窍门</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-啊呀呀呀我系统没法启动了我该怎么看日志啊？"><span class="post-toc-text">1. 啊呀呀呀我系统没法启动了我该怎么看日志啊？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-如何自定义启动项？"><span class="post-toc-text">2. 如何自定义启动项？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-如何选择默认启动的系统？"><span class="post-toc-text">3. 如何选择默认启动的系统？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-安装-macOS-最简单的方法是什么？"><span class="post-toc-text">4. 安装 macOS 最简单的方法是什么？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-为什么无法加载-Recovery-恢复镜像-进行在线安装？"><span class="post-toc-text">5. 为什么无法加载 Recovery 恢复镜像 进行在线安装？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-我可以在-Apple-的硬件、或虚拟机中使用-OpenCore-吗？"><span class="post-toc-text">6. 我可以在 Apple 的硬件、或虚拟机中使用 OpenCore 吗？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-为什么-Find-和-Replace-的补丁的长度必须相等？"><span class="post-toc-text">7. 为什么 Find 和 Replace 的补丁的长度必须相等？</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-我如何从-AptioMemoryFix-迁移到-OpenCore"><span class="post-toc-text">8. 我如何从 AptioMemoryFix 迁移到 OpenCore?</span></a></li></ol></li></ol>
                </div>
            </aside>
        </div>
        
    </div>
</article>

                <footer>
    <div class="doku-footer-container is-clearfix">
        <div class="doku-footer-item is-pulled-left">&copy; <span id="doku-copyrght-year"></span> <a href="/">OpenCore 简体中文参考手册(非官方)</a></div>

        <div class="doku-footer-item is-pulled-right">Powered by <a href="https://hexo.io" target="_blank" rel="external noopenner nofollow">Hexo</a> & <a href="https://github.com/SukkaW/hexo-theme-doku" target="_blank" rel="external noopenner nofollow">Doku</a></div>
    </div>
</footer>

            </main>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/stickyfilljs@2.1.0/dist/stickyfill.min.js"></script>
    <script src="/theme-doku/js/doku.js"></script>
</body>

</html>
