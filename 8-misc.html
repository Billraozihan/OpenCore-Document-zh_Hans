<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
<title>8. Misc | OpenCore 简体中文参考手册(非官方)</title>
<meta name="generator" content="Hexo 4.2.1">
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="description" content="由 Sukka 和黑苹果爱好者们维护的 OpenCore 文档简体中文翻译，实时更新 OpenCore 上游文档改动。努力提供权威的 OpenCore 简体中文参考资料。">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/logo/favicon.ico">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.16.2/styles/github.min.css">
<link rel="stylesheet" href="/theme-doku/css/doku.css">
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

</head>

<body>
    

<nav id="doku-navbar" class="navbar is-spaced has-shadow">
    <div class="container">
        <div class="navbar-brand">
            <!-- burger btn -->
            <a role="button" class="navbar-burger burger" id="doku-sidebar-toggle">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>

            <a class="navbar-item" href="https://oc.skk.moe">
                <h1 class="doku-navbar-title">
                    <img src="/logo/navbar.png" height="28">
                    <span class="is-size-4"></span>
                </h1>
            </a>
        </div>
        <div class="navbar-menu">
            <div class="navbar-start">
                
                    <a class="navbar-item" href="/">
                        
                        
                            <span>OpenCore 参考手册(简体中文)</span>
                        
                    </a>
                
                    <a class="navbar-item" href="/search.html">
                        
                            <span class="icon">
                                <i class="fas fa-search"></i>
                            </span>
                        
                        
                            <span>站内搜索</span>
                        
                    </a>
                
                    <a class="navbar-item" href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">
                        
                            <span class="icon">
                                <i class="fab fa-github"></i>
                            </span>
                        
                        
                            <span>GitHub</span>
                        
                    </a>
                
                <!-- navbar link -->
                <!--<a class="navbar-item">
                Home
            </a>-->
            </div>
            <!-- i18n switch -->
            <div class="navbar-end">
                <!--<div class="navbar-item">
                    <div class="dropdown is-right is-hoverable">
                        <div class="dropdown-trigger">
                            <button class="button" id="navbar-i18n-btn">
                                <span class="icon is-small">
                                    <i class="fas fa-globe-americas" aria-hidden="true"></i>
                                </span>
                                <span>Language</span>
                                <span class="icon is-small">
                                    <i class="fas fa-angle-down" aria-hidden="true"></i>
                                </span>
                            </button>
                        </div>
                        <div class="dropdown-menu">
                            <div class="dropdown-content">
                                <a href="#" class="dropdown-item">
                                    Dropdown item
                                </a>
                                <a class="dropdown-item">
                                    Other dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Active dropdown item
                                </a>
                                <a href="#" class="dropdown-item">
                                    Other dropdown item
                                </a>
                            </div>
                        </div>
                    </div>
                </div>-->
            </div>
        </div>
    </div>
</nav>


    <div class="container-fluid">
        <section class="main-content">
            


<aside class="doku-sidebar" id="doku-sidebar">
    <div class="doku-sidebar-content">
        <div class="menu">
            
                <ul class="menu-list is-hidden-desktop">
                    
                        
                            <li><a href="/">OpenCore 参考手册(简体中文)</span></a></li>
                        
                    
                        
                            <li><a href="/search.html">站内搜索</span></a></li>
                        
                    
                        
                            <li><a href="https://github.com/SukkaW/OpenCore-Document-zh_Hans" target="_blank" rel="noopener">GitHub</span></a></li>
                        
                    
                </ul>
            
            <hr class="is-hidden-desktop">
            
                
                    <ul class="menu-list">
                        
                            <li><a  href="/">0. 首页</a></li>
                        
                            <li><a  href="/1-introduction.html">1. 简介</a></li>
                        
                            <li><a  href="/2-configuration.html">2. 配置</a></li>
                        
                            <li><a  href="/3-setup.html">3. Setup</a></li>
                        
                            <li><a  href="/4-acpi.html">4. ACPI</a></li>
                        
                            <li><a  href="/5-booter.html">5. Booter</a></li>
                        
                            <li><a  href="/6-device-properties.html">6. DeviceProperties</a></li>
                        
                            <li><a  href="/7-kernel.html">7. Kernel</a></li>
                        
                            <li><a class="is-current" href="/8-misc.html">8. Misc</a></li>
                        
                            <li><a  href="/9-nvram.html">9. NVRAM</a></li>
                        
                            <li><a  href="/10-platform-info.html">10. PlatformInfo</a></li>
                        
                            <li><a  href="/11-uefi.html">11. UEFI</a></li>
                        
                            <li><a  href="/12-troubleshooting.html">12. 排错</a></li>
                        
                            <li><a  href="/kextlist.html">附录 1. OpenCore 兼容 Kext 列表</a></li>
                        
                    </ul>
                
            
        </div>
    </div>
</aside>

            <main class="is-paddingless doku-main-wrapper" id="doku-main">
                

<article class="doku-document-container clearfix">
    <header class="hero is-light" id="doku-document-hero">
        <div class="hero-body">
            <h1 class="title">8. Misc</h1>
            
                <p class="subtitle">关于 OpenCore 行为的其他配置</p>
            
            
                
                    <p><small>由 xMuu、Sukka 整理、由 Sukka、derbalkon 翻译。部分翻译参考黑果小兵的「精解 OpenCore」</small></p>
                
                
                    <p><small>本页面最后更新于 2020 年 06 月 02 日</small></p>
                
                <br>
            
            
                <a href="https://github.com/sukkaw/OpenCore-Document-zh_Hans/tree/master/source/8-misc.md" target="_blank" rel="external nofollow noreferrer noopener" class="button is-small is-rounded is-black"><span class="icon is-small"><i class="fab fa-github"></i></span><span>在 GitHub 上编辑</span></a>
            
        </div>
    </header>
    <div class="columns">
        <div class="column is-9-tablet doku-document-wrapper">
            <div class="content">
                <h2 id="8-1-Introduction"><a href="#8-1-Introduction" class="headerlink" title="8.1 Introduction"></a>8.1 Introduction</h2><p>本部分包含关于 OpenCore 行为的其他配置，以及不能被分类到其它章节的配置条目的说明。</p>
<p>OpenCore 尽可能地遵循 <code>bless</code> 模式，即 <code>Apple Boot Policy</code>。<code>bless</code> 模式的主要特点是允许在文件系统中嵌入启动选项（而且能通过专门的驱动程序访问），同时，相比于 UEFI 规范中的可移动媒体列表，它还支持更多的预定义启动路径。</p>
<p>只有当分区符合 <code>Scan policy</code> 时才能被启动（<code>Scan policy</code> 是一组限制条件，能够使其仅使用特定文件系统和特定设备类型的分区）。具体的扫描策略（<code>Scan policy</code>）将在下面的 <code>ScanPolicy</code> 属性中阐述。</p>
<p>扫描过程从获取 <code>Scan policy</code> 过滤过的分区开始。每个分区可能会产生多个主选项和备用选项。主选项描述的是安装在这个介质上的操作系统。备用选项描述的是介质上的操作系统的恢复项。备用选项可以在没有主选项的情况下存在，反之亦然。请注意，这些选项描述的操作系统不一定都在同一个分区上。每个主选项和备用选项都可以作为辅助选项（Auxiliary Option），也可以不作为辅助选项，具体细节参考下面的 <code>HideAuxiliary</code> 章节。用来确定启动选项的算法如下：</p>
<ol>
<li><p>通过 <code>Scan policy</code>（和驱动可用性）过滤，获取所有可用的分区句柄。</p>
</li>
<li><p>从 <code>BootOrder</code> UEFI 变量中，获取所有可用的启动选项。</p>
</li>
<li><p>对于每个找到的启动选项：</p>
<ul>
<li>检索该启动选项的设备路径。</li>
<li>执行对设备路径的修复（如 NVMe 子类型修复）和扩展（如 Boot Camp）。</li>
<li>通过定位到所产生的设备路径，来获取句柄（失败时忽略）。</li>
<li>在分区句柄列表中找到设备句柄（缺失时忽略）。</li>
<li>对磁盘设备路径（不指定引导程序）执行 <code>bless</code>（可能返回不止一个条目）。</li>
<li>对文件设备路径直接检查其文件系统。</li>
<li>排除所有带有黑名单文件名的选项（参考 <code>BlacklistAppleUpdate</code> 选项）。</li>
<li>在 OpenCore 启动分区中，通过 Header Check 排除所有 OpenCore Bootstrap 文件。</li>
<li>如果有分区句柄列表，则在列表中将设备句柄标记为 <em>used</em>。</li>
<li>将生成的条目注册为主选项，并确定他们的类型。某些类型的选项作为辅助选项（如 Apple HFS Recovery）。</li>
</ul>
</li>
<li><p>对于每个分区句柄：</p>
<ul>
<li>如果分区句柄被标记为 <em>unused</em>，则执行 <code>bless</code> 主选项列表检索。如果设置了 <code>BlessOverride</code> 列表，那么不仅能找到标准的 <code>bless</code> 路径，还能找到自定义的路径。</li>
<li>排除带有黑名单文件名的选项（参考 <code>BlacklistAppleUpdate</code> 选项）。</li>
<li>在 OpenCore 启动分区中，通过 Header Check 排除所有 OpenCore Bootstrap 文件。</li>
<li>将生成的条目注册为主选项，并确定他们的类型。某些类型的选项作为辅助选项（如 Apple HFS Recovery）。</li>
<li>如果分区已经具有来 <code>Apple Recovery</code> 类型的主选项，则继续处理下一个句柄。</li>
<li>通过 <code>bless</code> 恢复选项列表检索和预定义路径，来查找备用条目。</li>
<li>将生成的条目注册为备用辅助选项，并确定它们的类型。</li>
</ul>
</li>
<li><p>把自定义条目和工具添加为主选项，不做有关 <code>Auxiliary</code> 的任何检查。</p>
</li>
<li><p>把系统条目（如 <code>Reset NVRAM</code>）添加为主要的辅助选项。</p>
</li>
</ol>
<p>启动选择器中的启动选项的显示顺序和启动过程，是通过扫描算法分别来确定的。显示顺序如下：</p>
<ul>
<li>备用选项跟随主选项，即，Apple Recovery 会尽可能地跟随相关的 macOS 选项。</li>
<li>选项会按照文件系统句柄固件的顺序列出，以便在整个启动过程中保持一个既定的顺序，不因加载操作系统的不同而变化。</li>
<li>自定义条目、工具和系统条目会被添加到所有选项之后。</li>
<li>辅助选项只有在进入「高级模式」后才会显示（一般是按 <code>空格</code> 键）。</li>
</ul>
<p>启动过程如下：</p>
<ul>
<li>尝试通过 <code>BootNext</code> UEFI 变量查找第一个有效的主选项。</li>
<li>如果失败，则通过 <code>BootOrder</code> UEFI 变量继续查找。</li>
<li>将该选项标记为默认启动选项。</li>
<li>是否通过启动选择器来启动选项，取决于 <code>ShowPicker</code> 选项的设置。</li>
<li>如果还失败，则显示启动选择器。</li>
</ul>
<p><em>注 1</em>：这个过程只有在启用了 <code>RequestBootVarRouting</code> 选项，或者固件不控制 UEFI 启动选项（如 <code>OpenDuetPkg</code> 或其他自定义 BDS）时，才会可靠地工作。如果不启用 <code>BootProtect</code>，那么其他操作系统有可能会覆盖 OpenCore，如果你打算使用 OpenCore，请确保启用这个选项。</p>
<p><em>注 2</em>：UEFI 变量引导选项的引导参数，如果存在的话则会被丢弃，因为它们包含的一些参数可能会对操作系统产生不利影响，一旦启用了安全引导，这种影响是我们不希望看到的。</p>
<p><em>注 3</em>：某些操作系统（说的就是你，Windows）会在第一次启动时，或 NVRAM 重置后，创建他们的启动选项，并将其标记为最上面的选项。这种情况发生时，默认的启动条目选择将会更新，直到下一次重新手动配置。</p>
<h2 id="8-2-Properties"><a href="#8-2-Properties" class="headerlink" title="8.2 Properties"></a>8.2 Properties</h2><h3 id="Boot"><a href="#Boot" class="headerlink" title="Boot"></a><code>Boot</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Description</strong>: 应用本章节 Boot Properties 中的引导相关设置。</p>
<h3 id="BlessOverride"><a href="#BlessOverride" class="headerlink" title="BlessOverride"></a><code>BlessOverride</code></h3><p><strong>Type</strong>: <code>plist array</code><br><strong>Description</strong>: 通过 Bless Model 添加自定义扫描路径。</p>
<p>设计为填充 <code>plist string</code> 条目，其中包含指向自定义引导程序的绝对 UEFI 路径，例如，用于 Debian 引导程序的 <code>\EFI\debian\grubx64.efi</code>。这允许引导选择器自动发现异常的引导路径。在设计上它们等效于预定义的 Bless 路径（如 <code>\System\Library\CoreServices\boot.efi</code> 和 <code>\EFI\Microsoft\Boot\bootmgfw.efi</code>），但与预定义的 Bless 路径不同，它们具有最高优先级。</p>
<h3 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a><code>Debug</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Description</strong>: 应用本章节 Debug Properties 中的调试相关设置。</p>
<h3 id="Entries"><a href="#Entries" class="headerlink" title="Entries"></a><code>Entries</code></h3><p><strong>Type</strong>: <code>plist array</code><br><strong>Description</strong>: 在开机引导菜单中添加引导项。</p>
<p>应填入 <code>plist dict</code> 类型的值来描述相应的加载条目。详见 Entry Properties 部分。</p>
<h3 id="Security"><a href="#Security" class="headerlink" title="Security"></a><code>Security</code></h3><p><strong>Type</strong>: <code>plist dict</code><br><strong>Description</strong>: 应用本章节 Security Properties 中的安全相关设置。</p>
<h3 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a><code>Tools</code></h3><p><strong>Type</strong>: <code>plist array</code><br><strong>Description</strong>: 将工具条目添加到开机引导菜单。</p>
<p>应填入 <code>plist dict</code> 类型的值来描述相应的加载条目。详见 Entry Properties 部分。</p>
<p><em>注</em>：选择工具（比如 UEFI shell）是很危险的事情，利用这些工具可以轻易地绕过安全启动链，所以<strong>千万不要</strong>出现在产品配置中，尤其是设置了 vault 和安全启动保护的设备（译者注：即，工具仅作调试用）。</p>
<h2 id="8-3-Boot-Properties"><a href="#8-3-Boot-Properties" class="headerlink" title="8.3 Boot Properties"></a>8.3 Boot Properties</h2><h3 id="ConsoleAttributes"><a href="#ConsoleAttributes" class="headerlink" title="ConsoleAttributes"></a><code>ConsoleAttributes</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 为控制台设置特定的属性。</p>
<p>根据 UEFI 规范，文本渲染器支持的颜色参数为前景色与背景色之和。黑色背景色和黑色前景色 (<code>0</code>) 的值是预留的。以下是颜色名称一览：</p>
<ul>
<li><code>0x00</code> — <code>EFI_BLACK</code>（黑色字体）</li>
<li><code>0x01</code> — <code>EFI_BLUE</code>（蓝色字体）</li>
<li><code>0x02</code> — <code>EFI_GREEN</code>（绿色字体）</li>
<li><code>0x03</code> — <code>EFI_CYAN</code>（青色字体）</li>
<li><code>0x04</code> — <code>EFI_RED</code>（红色字体）</li>
<li><code>0x05</code> — <code>EFI_MAGENTA</code>（紫色字体）</li>
<li><code>0x06</code> — <code>EFI_BROWN</code>（棕色字体）</li>
<li><code>0x07</code> — <code>EFI_LIGHTGRAY</code>（亮灰色字体）</li>
<li><code>0x08</code> — <code>EFI_DARKGRAY</code>（暗灰色字体）</li>
<li><code>0x09</code> — <code>EFI_LIGHTBLUE</code>（淡蓝色字体）</li>
<li><code>0x0A</code> — <code>EFI_LIGHTGREEN</code>（淡绿色字体）</li>
<li><code>0x0B</code> — <code>EFI_LIGHTCYAN</code>（淡青色字体）</li>
<li><code>0x0C</code> — <code>EFI_LIGHTRED</code>（淡红色字体）</li>
<li><code>0x0D</code> — <code>EFI_LIGHTMAGENTA</code>（淡紫色字体）</li>
<li><code>0x0E</code> — <code>EFI_YELLOW</code>（黄色字体）</li>
<li><code>0x0F</code> — <code>EFI_WHITE</code>（白色字体）</li>
<li><code>0x00</code> — <code>EFI_BACKGROUND_BLACK</code>（黑色背景）</li>
<li><code>0x10</code> — <code>EFI_BACKGROUND_BLUE</code>（蓝色背景）</li>
<li><code>0x20</code> — <code>EFI_BACKGROUND_GREEN</code>（绿色背景）</li>
<li><code>0x30</code> — <code>EFI_BACKGROUND_CYAN</code>（青色背景）</li>
<li><code>0x40</code> — <code>EFI_BACKGROUND_RED</code>（红色背景）</li>
<li><code>0x50</code> — <code>EFI_BACKGROUND_MAGENTA</code>（紫色背景）</li>
<li><code>0x60</code> — <code>EFI_BACKGROUND_BROWN</code>（棕色背景）</li>
<li><code>0x70</code> — <code>EFI_BACKGROUND_LIGHTGRAY</code>（亮灰色背景）</li>
</ul>
<p><em>注</em>：这个选项可能和 TextRenderer 的 <code>System</code> 参数有冲突，设置一个非黑的背景可以用来测试 GOP 是否正常运行。</p>
<h3 id="HibernateMode"><a href="#HibernateMode" class="headerlink" title="HibernateMode"></a><code>HibernateMode</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>None</code><br><strong>Description</strong>: 休眠检测模式。 支持以下模式：</p>
<ul>
<li><code>None</code> — 禁用休眠</li>
<li><code>Auto</code> — 从 RTC 或 NVRAM 中检测</li>
<li><code>RTC</code> — 从 RTC 检测</li>
<li><code>NVRAM</code> — 从 NVRAM 检测</li>
</ul>
<h3 id="HideAuxiliary"><a href="#HideAuxiliary" class="headerlink" title="HideAuxiliary"></a><code>HideAuxiliary</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 默认情况下，隐藏开机引导项菜单中的辅助条目。</p>
<p>满足任一以下条件的引导项条目即会被视为「辅助项目」</p>
<ul>
<li>该引导项是 macOS Recovery 分区</li>
<li>该引导项是 macOS Time Machine 分区</li>
<li>该引导项被标记为 <code>Auxiliary</code></li>
<li>该引导项是一个系统（如 <code>Clean NVRAM</code>）</li>
</ul>
<p>即使被隐藏，你仍然可以通过 <code>空格</code> 进入「扩展模式」查看所有条目（引导项菜单会被重新加载）：</p>
<p>一般的，隐藏辅助条目有助于加快启动速度。</p>
<h3 id="HideSelf"><a href="#HideSelf" class="headerlink" title="HideSelf"></a><code>HideSelf</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 在 OpenCore 的启动选择中隐藏自身 EFI 分区内的其它启动项，如 UEFI OS 等、Recovery、Reset NVRAM 等。</p>
<h3 id="PickerAttributes"><a href="#PickerAttributes" class="headerlink" title="PickerAttributes"></a><code>PickerAttributes</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 设置开机引导菜单的属性。</p>
<p>不同的选项可以用属性掩码的方式来设置，其中掩码包含 OpenCore 的预留值（<code>BIT0</code> ~ <code>BIT15</code>）和 OEM 特定值（<code>BIT16</code> ~ <code>BIT31</code>）。</p>
<p>目前 OpenCore 提供的值包括：</p>
<ul>
<li><p><code>0x0001</code> — <code>OC_ATTR_USE_VOLUME_ICON</code>，提供引导项自定义图标：</p>
<ul>
<li><code>.VolumeIcon.icns</code> 文件，位于 APFS <code>Preboot</code> 根目录下。</li>
<li><code>.VolumeIcon.icns</code> 文件，位于其他文件系统的卷宗的根目录下。</li>
<li><code>&lt;TOOL_NAME&gt;.icns</code> 文件，用来显示 <code>Tools</code> 图标。</li>
</ul>
<p>卷宗图标可以在访达中设置。注意，启用此功能可能会导致 外部可移除硬盘的图标 和 内部不可移除硬盘的图标 无法区分。</p>
</li>
<li><p><code>0x0002</code> — <code>OC_ATTR_USE_DISK_LABEL_FILE</code>，提供引导项自定义渲染的标题：</p>
<ul>
<li><code>.disk_label</code> (<code>.disk_label_2x</code>) 文件与 bootloader 相关，适用于所有文件系统。</li>
<li><code>&lt;TOOL_NAME.lbl</code> (<code>&lt;TOOL_NAME.l2x</code>) 文件与工具相关，适用于 <code>Tools</code>。</li>
</ul>
<p>可用 <code>disklabel</code> 实用工具或 <code>bless</code> 命令来生成预置标签。当禁用或者缺少文本标签 (<code>.contentDetails</code> or <code>.disk_label.contentDetails</code>) 时将以它来代替渲染。</p>
</li>
<li><p><code>0x0004</code> — <code>OC_ATTR_USE_GENERIC_LABEL_IMAGE</code>，为没有自定义条目的启动项提供预定义的标签图像。可能会缺少实际启动项的详细信息。</p>
</li>
</ul>
<h3 id="PickerAudioAssist"><a href="#PickerAudioAssist" class="headerlink" title="PickerAudioAssist"></a><code>PickerAudioAssist</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 在开机引导菜单中启用 屏幕朗读。</p>
<p>macOS Bootloader 屏幕朗读 的偏好设置是存在 <code>isVOEnabled.int32</code> 文件的 <code>preferences.efires</code> 中、并受操作系统控制。这里仅提供一个等效的开关。切换 OpenCore 开机引导菜单和 macOS BootLoader FileVault 2 登录界面也可以使用快捷键 <code>Command</code> + <code>F5</code>。</p>
<p><em>注</em>：屏幕朗读 依赖可以正常工作的音频设备。</p>
<h3 id="PollAppleHotKeys"><a href="#PollAppleHotKeys" class="headerlink" title="PollAppleHotKeys"></a><code>PollAppleHotKeys</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 在开机引导菜单中启用 <code>modifier hotkey</code>。</p>
<p>除了 <code>action hotkeys</code>（在 <code>PickerMode</code> 一节中有所描述，由 Apple BDS 处理），还有由操作系统 bootloader 处理的修饰键，即 <code>boot.efi</code>。这些键可以通过提供不同的启动模式来改变操作系统的行为。 </p>
<p>在某些固件上，由于驱动程序不兼容，使用修饰键可能会有问题。为了解决问题，这个选项允许你在启动选择器中以更宽松的方式注册选择的热键，比如：在按住 <code>Shift</code> 和其他按键的同时支持敲击按键，而不是只按 <code>Shift</code>，这在许多 PS/2 键盘上是无法识别的。已知的 <code>modifier hotkeys</code> 包括：</p>
<ul>
<li><code>CMD+C+MINUS</code> — 禁用主板兼容性检查。</li>
<li><code>CMD+K</code> — 从 release 版本的内核启动，类似于 <code>kcsuffix=release</code> 参数。</li>
<li><code>CMD+R</code> — 从恢复分区启动。</li>
<li><code>CMD+S</code> — 启动至单用户模式。</li>
<li><code>CMD+S+MINUS</code> — 禁用 KASLR slide，需要事先禁用 SIP。</li>
<li><code>CMD+V</code> — 启用 <code>-v</code>。</li>
<li><code>Shift</code> — 启用安全模式。</li>
</ul>
<h3 id="ShowPicker"><a href="#ShowPicker" class="headerlink" title="ShowPicker"></a><code>ShowPicker</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 是否显示开机引导菜单。</p>
<h3 id="TakeoffDelay"><a href="#TakeoffDelay" class="headerlink" title="TakeoffDelay"></a><code>TakeoffDelay</code></h3><p><strong>Type</strong>: <code>plist integer</code>, 32 bit<br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 在 处理引导项启动 和 处理 <code>action hotkeys</code> 之前的延迟，以微秒为单位。</p>
<p>引入这一延迟有助于为你争取时间去完成按住 <code>action hotkey</code> 的操作，比如启动到恢复模式。在某些平台上，可能需要把此项设置为至少 <code>5000-10000</code> 来使 <code>action hotkeys</code> 生效，具体取决于键盘驱动程序的性质。</p>
<h3 id="Timeout"><a href="#Timeout" class="headerlink" title="Timeout"></a><code>Timeout</code></h3><p><strong>Type</strong>: <code>plist integer</code>, 32 bit<br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 开机引导菜单中，启动默认启动项之前超时时间（以秒为单位）。 使用 <code>0</code> 禁用倒计时。</p>
<blockquote>
<p>译者注：<code>0</code> 为关闭倒计时而非跳过倒计时，相当于 Clover 的 <code>-1</code>。</p>
</blockquote>
<h3 id="PickerMode"><a href="#PickerMode" class="headerlink" title="PickerMode"></a><code>PickerMode</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>Builtin</code><br><strong>Description</strong>: 选择启动管理器的界面。</p>
<p>这里描述的是具有可选用户界面的底层启动管理器，支持以下值：</p>
<ul>
<li><code>Builtin</code> — 使用由 OpenCore 处理的启动管理器，简单的文本用户界面。</li>
<li><code>External</code> — 如果可用，则使用外部启动管理器协议，否则使用 <code>Builtin</code> 模式。</li>
<li><code>Apple</code> — 如果可用，则使用 Apple 启动管理器，否则使用 <code>Builtin</code> 模式。</li>
</ul>
<p><code>External</code> 模式一旦成功，就会完全禁用 OpenCore 中的除策略强制执行的所有其他启动管理器，而 <code>Apple</code> 模式下可以绕过策略的强制执行。请参阅 <code>ueficanopy</code> 插件以了解自定义用户界面的实例。</p>
<p>OpenCore 内置的启动选择器包含了一系列在启动过程中选择的操作。支持的操作与 Apple BDS 类似，一般来说能够通过在启动过程中按住 <code>action hotkeys</code> 来实现，目前有以下几种：</p>
<ul>
<li><code>Default</code> — 此项为默认选项，可以让 OpenCore 内置的启动选择器按照 <a href="https://support.apple.com/HT202796" target="_blank" rel="noopener">启动磁盘</a> 偏好设置中指定的方式加载默认的启动项。</li>
<li><code>ShowPicker</code> — 此项会强制显示启动选择器，通常可以在启动时按住 <code>OPT</code> 键来实现。将 <code>ShowPicker</code> 设置为 <code>true</code> 会使 <code>ShowPicker</code> 成为默认选项。</li>
<li><code>ResetNvram</code> — 此项会擦除 UEFI 变量，通常是在启动时按住 <code>CMD+OPT+P+R</code> 组合键来实现。另一种擦除 UEFI 变量的方法是在选择器中选择 <code>Reset NVRAM</code>，要使用这种方式需要将 <code>AllowNvramReset</code> 设置为 <code>true</code>。</li>
<li><code>BootApple</code> — 此项会启动到第一个找到的 Apple 操作系统，除非 Apple 已经默认选择了操作系统。按住 <code>X</code> 来选择此选项。</li>
<li><code>BootAppleRecovery</code> — 此项会启动到 Apple 操作系统的恢复系统。这里的系统要么是「与默认选中的操作系统相关的恢复系统」，要么是「第一个找到的非 Apple 的默认操作系统的恢复系统」，要么是「无恢复系统」。按住 <code>CMD+R</code> 组合键来选择此选项。</li>
</ul>
<p><em>注 1</em>：需要激活 <code>KeySupport</code>、<code>OpenUsbKbDxe</code> 或类似的驱动程序才能工作。无法获得全部按键功能的固件有很多。</p>
<p><em>注 2</em>：当禁用 <code>ShowPicker</code> 时，除了 <code>OPT</code> 键之外，OpenCore 还支持 <code>Escape</code> 键来显示启动选项。这个键不仅适用于 <code>Apple</code> 启动选择器模式，也适用于 PS/2 键盘的固件，因为这种键盘无法提交按住 <code>OPT</code> 键的请求，需要连续点按 <code>Escape</code> 键来进入启动选择菜单。</p>
<p><em>注 3</em>：有些 Mac 的 GOP 很棘手，可能很难进入 Apple 启动选择器。要解决这个问题，可以在不加载 GOP 的情况下 bless OpenCore 的 <code>BootKicker</code> 实用工具。</p>
<h2 id="8-4-Debug-Properties"><a href="#8-4-Debug-Properties" class="headerlink" title="8.4 Debug Properties"></a>8.4 Debug Properties</h2><h3 id="AppleDebug"><a href="#AppleDebug" class="headerlink" title="AppleDebug"></a><code>AppleDebug</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 启用将 <code>boot.efi</code> 调试日志保存到 OpenCore 日志。</p>
<p><em>注</em>：此项仅适用于 10.15.4 和更新版本。</p>
<h3 id="ApplePanic"><a href="#ApplePanic" class="headerlink" title="ApplePanic"></a><code>ApplePanic</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 将 macOS Kernel Panic 保存到 OpenCore 根分区。</p>
<p>保存的文件为 <code>panic-YYYY-MM-DD-HHMMSS.txt</code>。强烈建议使用 <code>keepsyms=1</code> 引导参数来查看 Panic 日志中的调试符号。如果没有，可以用 <code>kpdescribe.sh</code> 实用程序（OpenCore 绑定）来部分恢复堆栈跟踪。</p>
<p>开发者内核和调试内核会产生更有用的 Kernel Panic。调试的时候，可以考虑从 <a href="https://developer.apple.com" target="_blank" rel="noopener">developer.apple.com</a> 下载并安装 <code>KernelDebugKit</code>。如果要激活开发者内核，需要添加一个 <code>kcsuffix=development</code> 引导参数。使用 <code>uname -a</code> 命令来确保你当前加载的内核是一个开发者（或调试）内核。</p>
<p>如果没有实用 OpenCore 的 Kernel Panic 保存机制，仍然可以在 <code>/Library/Logs/DiagnosticReports</code> 目录下找到 Panic 日志。从 macOS Catalina 开始，Kernel Panic 会以 JSON 格式储存，所以在传递给 <code>kpdescribe.sh</code> 之前需要预处理：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">cat Kernel.panic | grep macOSProcessedStackshotData | python -c <span class="hljs-string">'import json,sys;print(json.load(sys.stdin)["macOSPanicString"])'</span><br></code></pre></td></tr></table></figure>

<h3 id="DisableWatchDog"><a href="#DisableWatchDog" class="headerlink" title="DisableWatchDog"></a><code>DisableWatchDog</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 某些固件可能无法成功快速启动操作系统，尤其是在调试模式下，这会导致看门狗定时器中止引导过程。此选项关闭看门狗定时器，用于排错。</p>
<h3 id="DisplayDelay"><a href="#DisplayDelay" class="headerlink" title="DisplayDelay"></a><code>DisplayDelay</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 屏幕上打印每行输出之间的延迟。</p>
<h3 id="DisplayLevel"><a href="#DisplayLevel" class="headerlink" title="DisplayLevel"></a><code>DisplayLevel</code></h3><p><strong>Type</strong>: <code>plist integer</code>, 64 bit<br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 与屏幕显示相关的 EDK II 调试级别的位掩码（总和）。除非 <code>Target</code> 启用了控制台在屏幕上输出日志，否则屏幕上的调试输出将不可见。支持以下级别（更多信息参见 <a href="https://github.com/acidanthera/audk/blob/master/MdePkg/Include/Library/DebugLib.h" target="_blank" rel="noopener">DebugLib.h</a>）：</p>
<ul>
<li><code>0x00000002</code> (bit <code>1</code>) — <code>DEBUG_WARN</code> in <code>DEBUG</code>, <code>NOOPT</code>, <code>RELEASE</code>.</li>
<li><code>0x00000040</code> (bit <code>6</code>) — <code>DEBUG_INFO</code> in <code>DEBUG</code>, <code>NOOPT</code>.</li>
<li><code>0x00400000</code> (bit <code>22</code>) — <code>DEBUG_VERBOSE</code> in custom builds.</li>
<li><code>0x80000000</code> (bit <code>31</code>) — <code>DEBUG_ERROR</code> in <code>DEBUG</code>, <code>NOOPT</code>, <code>RELEASE</code>.</li>
</ul>
<h3 id="SysReport"><a href="#SysReport" class="headerlink" title="SysReport"></a><code>SysReport</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 在 EFI 分区中保存系统报告。</p>
<p>启用这一选项后，EFI 分区中将会新建一个 <code>SysReport</code> 目录。这一目录中将会保存 ACPI 和 SMBIOS 的调试信息。</p>
<p><em>注</em>：基于安全的考虑，<code>Release</code> 构建的 OpenCore 将不会内置这一功能。如果需要使用这一功能请使用 <code>Debug</code> 构建版。</p>
<h3 id="Target"><a href="#Target" class="headerlink" title="Target"></a><code>Target</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0</code><br><strong>Description</strong>: 启用日志记录目标的位掩码（总和）。默认所有日志的输出都是隐藏的，所以当需要调试时，有必要设置这个选项。</p>
<p>支持以下日志记录目标：</p>
<ul>
<li><code>0x01</code> (bit <code>0</code>) — 启用日志记录，否则所有日志都会被丢弃</li>
<li><code>0x02</code> (bit <code>1</code>) — 在屏幕上输出日志</li>
<li><code>0x04</code> (bit <code>2</code>) — 启用把日志记录到 Data Hub</li>
<li><code>0x08</code> (bit <code>3</code>) — 启用串行端口记录</li>
<li><code>0x10</code> (bit <code>4</code>) — 启用 UEFI 变量记录</li>
<li><code>0x20</code> (bit <code>5</code>) — 启用非易失性 UEFI 变量记录</li>
<li><code>0x40</code> (bit <code>6</code>) — 启用在 ESP 分区生成日志文件</li>
</ul>
<p>控制台日志会比其他日志少，根据 build 类型（<code>RELEASE</code>、<code>DEBUG</code> 或 <code>NOOPT</code>）的不同，读取到的日志量也会不同（从最少到最多）。</p>
<p>Data Hub 日志中不包括 Kernel 和 Kext 的日志。要获取 Data Hub 日志，请使用 ioreg：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">ioreg -lw0 -p IODeviceTree | grep boot-log | sort | sed &#39;s&#x2F;.*&lt;\(.*\)&gt;.*&#x2F;\1&#x2F;&#39; | xxd -r -p<br></code></pre></td></tr></table></figure>

<p>UEFI 变量日志中不包含某些信息，也没有性能数据。为了安全起见，日志大小被限制在 32 KB。有些固件可能会提前截断它，或者在它无内存时完全删除它。使用非易失性 flag 将会在每打印一行后把日志写入 NVRAM 闪存。如要获取 UEFI 变量日志，请在 macOS 中使用以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:boot-log | awk &#39;&#123;gsub(&#x2F;%0d%0a%00&#x2F;,&quot;&quot;);gsub(&#x2F;%0d%0a&#x2F;,&quot;\n&quot;)&#125;1&#39;<br></code></pre></td></tr></table></figure>

<p><em>警告</em>：有些固件的 NVRAM 垃圾收集据说存在问题，它们可能无法做到在每次变量删除后都释放空间。在这类设备上，没有额外需要的话，请不要使用非易失性 NVRAM 日志。</p>
<p>虽然 OpenCore 的引导日志已经包含了基本的版本信息（包括 build 类型和日期），但即使在禁用引导日志的情况下，这些数据也可以在 NVRAM 中的 <code>opencore-version</code> 变量中找到。</p>
<p>文件记录会在 EFI 卷宗的根目录下创建一个名为 <code>opencore-YYYY-MM-DD-HHMMSS.txt</code> 的文件，其中包含了日志的内容（大写字母部分会被替换为固件中的日期和时间）请注意，固件中的一些文件系统驱动程序不可靠，并且可能会通过 UEFI 写入文件时损坏数据。日志是尝试用最安全的方式来写入的，因此速度很慢。当你使用慢速硬盘时，请确保已将 <code>DisableWatchDog</code> 设置为 <code>true</code>。</p>
<p>When interpreting the log, note that the lines are prefixed with a tag describing the relevant location (module) of the log line allowing one to better attribute the line to the functionality. The list of currently used tags is provided below.</p>
<p><strong>Drivers and tools</strong>:</p>
<ul>
<li><code>BMF</code> — OpenCanopy, bitmap font</li>
<li><code>BS</code> — Bootstrap</li>
<li><code>GSTT</code> — GoptStop</li>
<li><code>HDA</code> — AudioDxe</li>
<li><code>KKT</code> — KeyTester</li>
<li><code>MMDD</code> — MmapDump</li>
<li><code>OCPAVP</code> — PavpProvision</li>
<li><code>OCRST</code> — ResetSystem</li>
<li><code>OCUI</code> — OpenCanopy</li>
<li><code>OC</code> — OpenCore main</li>
<li><code>VMOPT</code> — VerifyMemOpt</li>
</ul>
<p><strong>Libraries</strong>:</p>
<ul>
<li><code>AAPL</code> — OcDebugLogLib, Apple EfiBoot logging</li>
<li><code>OCABC</code> — OcAfterBootCompatLib</li>
<li><code>OCAE</code> — OcAppleEventLib</li>
<li><code>OCAK</code> — OcAppleKernelLib</li>
<li><code>OCAU</code> — OcAudioLib</li>
<li><code>OCAV</code> — OcAppleImageVerificationLib</li>
<li><code>OCA</code> —- OcAcpiLib</li>
<li><code>OCBP</code> — OcAppleBootPolicyLib</li>
<li><code>OCB</code> — OcBootManagementLib</li>
<li><code>OCCL</code> — OcAppleChunkListLib</li>
<li><code>OCCPU</code> — OcCpuLib</li>
<li><code>OCC</code> — OcConsoleLib</li>
<li><code>OCDH</code> — OcDataHubLib</li>
<li><code>OCDI</code> — OcAppleDiskImageLib</li>
<li><code>OCFSQ</code> — OcFileLib, UnblockFs quirk</li>
<li><code>OCFS</code> — OcFileLib</li>
<li><code>OCFV</code> — OcFirmwareVolumeLib</li>
<li><code>OCHS</code> — OcHashServicesLib</li>
<li><code>OCIC</code> — OcImageConversionLib</li>
<li><code>OCII</code> — OcInputLib</li>
<li><code>OCJS</code> — OcApfsLib</li>
<li><code>OCKM</code> — OcAppleKeyMapLib</li>
<li><code>OCL</code> — OcDebugLogLib</li>
<li><code>OCMCO</code> — OcMachoLib</li>
<li><code>OCME</code> — OcHeciLib</li>
<li><code>OCMM</code> — OcMemoryLib</li>
<li><code>OCPI</code> — OcFileLib, partition info</li>
<li><code>OCPNG</code> — OcPngLib</li>
<li><code>OCRAM</code> — OcAppleRamDiskLib</li>
<li><code>OCRTC</code> — OcRtcLib</li>
<li><code>OCSB</code> — OcAppleSecureBootLib</li>
<li><code>OCSMB</code> — OcSmbiosLib</li>
<li><code>OCSMC</code> — OcSmcLib</li>
<li><code>OCST</code> — OcStorageLib</li>
<li><code>OCS</code> — OcSerializedLib</li>
<li><code>OCTPL</code> — OcTemplateLib</li>
<li><code>OCUC</code> — OcUnicodeCollationLib</li>
<li><code>OCUT</code> — OcAppleUserInterfaceThemeLib</li>
<li><code>OCXML</code> — OcXmlLib</li>
</ul>
<h2 id="8-5-Security-Properties"><a href="#8-5-Security-Properties" class="headerlink" title="8.5 Security Properties"></a>8.5 Security Properties</h2><h3 id="AllowNvramReset"><a href="#AllowNvramReset" class="headerlink" title="AllowNvramReset"></a><code>AllowNvramReset</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 启用这一选项后将允许使用 <code>CMD+OPT+P+R</code> 快捷键重置 NVRAM，同时 <code>NVRAM Reset</code> 条目也会出现在开机引导菜单中。</p>
<h3 id="AllowSetDefault"><a href="#AllowSetDefault" class="headerlink" title="AllowSetDefault"></a><code>AllowSetDefault</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 允许使用 <code>CTRL+Enter</code> 和 <code>CTRL+[数字]</code> 设置默认启动项。</p>
<h3 id="AuthRestart"><a href="#AuthRestart" class="headerlink" title="AuthRestart"></a><code>AuthRestart</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 启用与 <code>VirtualSMC</code> 兼容的 authenticated restart。</p>
<p>authenticated restart 可以在重启 FileVault2 分区时不用再次输入密码。你可以使用下述指令执行一次 authenticated restart：<code>sudo fdesetup authrestart</code>。macOS 在安装系统更新使用的也是 authenticated restart。</p>
<p>VirtualSMC 通过将磁盘加密密钥拆分保存在 NVRAM 和 RTC 中来执行 authenticated restart。虽然 OpenCore 在启动系统后立刻删除密钥，但是这仍然可能被视为安全隐患。</p>
<h3 id="BlacklistAppleUpdate"><a href="#BlacklistAppleUpdate" class="headerlink" title="BlacklistAppleUpdate"></a><code>BlacklistAppleUpdate</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: Ignore boot options trying to update Apple peripheral firmware. (e.g. <code>MultiUpdater.efi</code>).</p>
<h3 id="BootProtect"><a href="#BootProtect" class="headerlink" title="BootProtect"></a><code>BootProtect</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>None</code><br><strong>Description</strong>: 该选项试图保证 Bootloader 的持久性、一致性。</p>
<p>可以使用的值有：</p>
<ul>
<li><code>None</code>: 什么都不做</li>
<li><code>Bootstrap</code>: 在启动引导程序时，在 UEFI 变量存储中创建或更新最高优先级  <code>\EFI\OC\Bootstrap\Bootstrap.efi</code> 引导选项 (<code>Boot9696</code>)。要使用这个选项，必须同时开启 <code>RequestBootVarRouting</code>。</li>
</ul>
<p>在安装和升级第三方操作系统时 <code>\EFI\BOOT\BOOTx64.efi</code> 文件可能会被覆盖掉，该选项则保证了出现覆盖情况时 Bootloader 的一致性。在 <code>Bootstrap</code> 模式下创建一个自定义启动项后，<code>\EFI\BOOT\BOOTx64.efi</code> 这个文件路径将不再用于引导 OpenCore。</p>
<p><em>注 1</em>：某些固件的 NVRAM 本身存在问题，可能会出现无启动项支持，或者其他各种不兼容的情况。虽然可能性不大，但使用此选项可能会导致启动失败。请在已知兼容的主板上使用，风险自行考虑。</p>
<p><em>注 2</em>：请注意，NVRAM 重置也会同时清除 <code>Bootstrap</code> 模式下创建的启动选项。</p>
<h3 id="ExposeSensitiveData"><a href="#ExposeSensitiveData" class="headerlink" title="ExposeSensitiveData"></a><code>ExposeSensitiveData</code></h3><p><strong>Type</strong>: <code>plist integer</code><br><strong>Failsafe</strong>: <code>0x6</code><br><strong>Description</strong>: 用于向操作系统暴露敏感数据的位掩码（总和）。</p>
<ul>
<li><code>0x01</code> — 将可打印的引导器路径作为 UEFI 变量暴露出来</li>
<li><code>0x02</code> — 将 OpenCore 版本作为 UEFI 变量暴露出来</li>
<li><code>0x04</code> — 将 OpenCore 版本暴露在启动选择菜单的标题位置</li>
<li><code>0x08</code> — 将 OEM 信息作为一组 UEFI 变量暴露出来</li>
</ul>
<p>根据加载顺序，暴露的启动器路径指向 OpenCore.efi 或其引导器。如要获得引导器路径，请在 macOS 中使用以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:boot-path<br></code></pre></td></tr></table></figure>

<p>如要使用启动器路径加载启动器卷宗，请在 macOS 中使用以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plain">u&#x3D;$(nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:boot-path | sed &#39;s&#x2F;.*GPT,\([^,]*\),.*&#x2F;\1&#x2F;&#39;); \<br>if [ &quot;$u&quot; !&#x3D; &quot;&quot; ]; then sudo diskutil mount $u ; fi<br></code></pre></td></tr></table></figure>

<p>如要获取 OpenCore 版本信息，请在 macOS 中使用以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:opencore-version<br></code></pre></td></tr></table></figure>

<p>如要获取 OEM 信息，请在 macOS 中使用以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:oem-product # SMBIOS Type1 ProductName<br>nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:oem-vendor # SMBIOS Type2 Manufacturer<br>nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:oem-board # SMBIOS Type2 ProductName<br></code></pre></td></tr></table></figure>

<h3 id="HaltLevel"><a href="#HaltLevel" class="headerlink" title="HaltLevel"></a><code>HaltLevel</code></h3><p><strong>Type</strong>: <code>plist integer</code>, 64 bit<br><strong>Failsafe</strong>: <code>0x80000000</code> (<code>DEBUG_ERROR</code>)<br><strong>Description</strong>: EDK II 调试级别的位掩码（总和），使 CPU 在获得 <code>HaltLevel</code> 消息后中止（停止执行）。可能的值与 <code>DisplayLevel</code> 值相匹配。</p>
<h3 id="Vault"><a href="#Vault" class="headerlink" title="Vault"></a><code>Vault</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: <code>Secure</code><br><strong>Description</strong>: 启用 OpenCore 的 vault 机制。</p>
<p>有效值：</p>
<ul>
<li><code>Optional</code> — 无要求，vault 不加载，不安全。</li>
<li><code>Basic</code> — 需要有 <code>vault.plist</code> 文件存放在 <code>OC</code> 目录下。这个值提供了基本的文件系统完整性验证，可以防止无意中的文件系统损坏。</li>
<li><code>Secure</code> — 需要有 <code>vault.sig</code> 签名的 <code>vault.plist</code> 文件存放在 <code>OC</code> 目录下。这个值包括了 <code>Basic</code> 完整性检查，但也会尝试建立一个可信的引导链。</li>
</ul>
<p><code>vault.plist</code> 文件应该包含 OpenCore 使用的所有文件的 SHA-256 哈希值。强烈建议使用这个文件，以确保无意中的文件修改（包括文件系统损坏）不会被忽视。要自动创建这个文件，请使用 <a href="https://github.com/acidanthera/OpenCorePkg/tree/master/Utilities/CreateVault" target="_blank" rel="noopener"><code>create_vault.sh</code></a> 脚本。无论底层的文件系统如何，路径名和大小写必须在 <code>config.plist</code> 和 <code>vault.plist</code> 之间相匹配。</p>
<p><code>vault.sig</code> 文件应该包含一个来自 <code>vault.plist</code> SHA-256 哈希值的原始的 256 字节 RSA-2048 签名。这个签名是根据嵌入到 <code>OpenCore.efi</code> 中的公钥来验证的。如要嵌入公钥，以下任一步骤均可：</p>
<ul>
<li>在 <code>OpenCore.efi</code> 编译过程中，在 <a href="https://github.com/acidanthera/OpenCorePkg/blob/master/Platform/OpenCore/OpenCoreVault.c" target="_blank" rel="noopener"><code>OpenCoreVault.c</code></a> 文件中提供公钥。</li>
<li>用二进制补丁的方式将 <code>OpenCore.efi</code> 中 <code>=BEGIN OC VAULT=</code> 和 <code>==END OC VAULT==</code> ASCII 码之间的 0 替换为公钥。</li>
</ul>
<p>RSA 公钥的 520 字节格式可参阅 Chromium OS 文档。如要从 X.509 证书或 PEM 文件中转换公钥，请使用 <a href="https://github.com/acidanthera/OpenCorePkg/tree/master/Utilities/CreateVault" target="_blank" rel="noopener">RsaTool</a>。</p>
<p>以下操作的完整指令：</p>
<ul>
<li>创建 <code>vault.plist</code></li>
<li>创建一个新的 RSA 密钥（总是要这样做，以避免加载旧配置）</li>
<li>将 RSA 密钥嵌入到 <code>OpenCore.efi</code></li>
<li>创建 <code>vault.sig</code></li>
</ul>
<p>可以参照如下指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain">cd &#x2F;Volumes&#x2F;EFI&#x2F;EFI&#x2F;OC<br>&#x2F;path&#x2F;to&#x2F;create_vault.sh .<br>&#x2F;path&#x2F;to&#x2F;RsaTool -sign vault.plist vault.sig vault.pub<br>off&#x3D;$(($(strings -a -t d OpenCore.efi | grep &quot;&#x3D;BEGIN OC VAULT&#x3D;&quot; | cut -f1 -d&#39; &#39;)+16))<br>dd of&#x3D;OpenCore.efi if&#x3D;vault.pub bs&#x3D;1 seek&#x3D;$off count&#x3D;528 conv&#x3D;notrunc<br>rm vault.pub<br></code></pre></td></tr></table></figure>

<p><em>注 1</em>：必须使用外部方法来验证 <code>OpenCore.efi</code> 和 <code>BOOTx64.efi</code> 的安全启动路径，尽管它们看似显而易见。为此，建议你至少使用自定义证书来启用 UEFI 的 SecureBoot，并使用自定义的密钥来签名 <code>OpenCore.efi</code> 和 <code>BOOTx64.efi</code> 。关于在现代固件上定制安全启动的更多细节，请参见 <a href="https://habr.com/post/273497/" target="_blank" rel="noopener">Taming UEFI SecureBoot</a>（俄文）。</p>
<p><em>注 2</em>：当 <code>vault.plist</code> 存在，或者当公钥嵌入到 <code>OpenCore.efi</code> 中的时候，无论这个选项是什么，<code>vault.plist</code> 和 <code>vault.sig</code> 都会被使用。设置这个选项仅仅会确保配置的合理性，否则启动过程会中止。</p>
<h3 id="ScanPolicy"><a href="#ScanPolicy" class="headerlink" title="ScanPolicy"></a><code>ScanPolicy</code></h3><p><strong>Type</strong>: <code>plist integer</code>, 32 bit<br><strong>Failsafe</strong>: <code>0xF0103</code><br><strong>Description</strong>: 定义操作系统检测策略。</p>
<p>通过设置该值来根据所选 flag 的位掩码（总和）防止从非信任源扫描（和启动）。由于不可能可靠地检测到每一个文件类型或设备类型，因此在开放环境中不能完全依赖此功能，需要采取额外的措施。</p>
<p>第三方驱动程序可能会根据提供的扫描策略引入额外的安全（和性能）措施。扫描策略暴露在 <code>4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102</code> GUID的 <code>scan-policy</code> 变量中，仅适用于 UEFI 启动服务。</p>
<ul>
<li><code>0x00000001</code> (bit <code>0</code>) — <code>OC_SCAN_FILE_SYSTEM_LOCK</code>，将扫描限制于仅扫描此策略定义的已知文件系统。文件系统驱动可能感知不到这个策略，为了避免挂载不必要的文件系统，最好不要加载它的驱动程序。此 bit 不影响 dmg 挂载，因为它可能有各种文件系统。已知文件系统的前缀为 <code>OC_SCAN_ALLOW_FS_</code>。</li>
<li><code>0x00000002</code> (bit <code>1</code>) — <code>OC_SCAN_DEVICE_LOCK</code>，将扫描限制于仅扫描此策略定义的已知设备类型。由于协议隧道并不一定能被检测到，因此请注意，在某些系统上可能会出现 USB 硬盘被识别成 SATA 等情况。如有类似情况，请务必报告。已知设备类型的前缀为 <code>OC_SCAN_ALLOW_DEVICE_</code>。</li>
<li><code>0x00000100</code> (bit <code>8</code>) — <code>OC_SCAN_ALLOW_FS_APFS</code>，允许扫描 APFS 文件系统。</li>
<li><code>0x00000200</code> (bit <code>9</code>) — <code>OC_SCAN_ALLOW_FS_HFS</code>，允许扫描 HFS 文件系统。</li>
<li><code>0x00000400</code> (bit <code>10</code>) — <code>OC_SCAN_ALLOW_FS_ESP</code>，允许扫描 EFI 系统分区文件系统。</li>
<li><code>0x00000800</code> (bit <code>11</code>) — <code>OC_SCAN_ALLOW_FS_NTFS</code>，允许扫描 NTFS（MSFT Basic Data）文件系统。</li>
<li><code>0x00001000</code> (bit <code>12</code>) — <code>OC_SCAN_ALLOW_FS_EXT</code>，允许扫描 EXT（Linux Root）文件系统。</li>
<li><code>0x00010000</code> (bit <code>16</code>) — <code>OC_SCAN_ALLOW_DEVICE_SATA</code>，允许扫描 SATA 设备。</li>
<li><code>0x00020000</code> (bit <code>17</code>) — <code>OC_SCAN_ALLOW_DEVICE_SASEX</code>，允许扫描 SAS 和 Mac NVMe 设备。</li>
<li><code>0x00040000</code> (bit <code>18</code>) — <code>OC_SCAN_ALLOW_DEVICE_SCSI</code>，允许扫描 SCSI 设备。</li>
<li><code>0x00080000</code> (bit <code>19</code>) — <code>OC_SCAN_ALLOW_DEVICE_NVME</code>，允许扫描 NVMe 设备。</li>
<li><code>0x00100000</code> (bit <code>20</code>) — <code>OC_SCAN_ALLOW_DEVICE_ATAPI</code>，允许扫描 CD/DVD 设备。</li>
<li><code>0x00200000</code> (bit <code>21</code>) — <code>OC_SCAN_ALLOW_DEVICE_USB</code>，允许扫描 USB 设备。</li>
<li><code>0x00400000</code> (bit <code>22</code>) — <code>OC_SCAN_ALLOW_DEVICE_FIREWIRE</code>，允许扫描 FireWire 设备。</li>
<li><code>0x00800000</code> (bit <code>23</code>) — <code>OC_SCAN_ALLOW_DEVICE_SDCARD</code>，允许扫描读卡器设备。</li>
</ul>
<p><em>注</em>：举例：根据以上描述，<code>0xF0103</code> 值允许扫描带有 APFS 文件系统的 SATA、SAS、SCSI 和 NVMe 设备，不扫描 USB、CD 和 FireWire 设备上的 APFS 文件系统，也不扫描任何带有 HFS 或 FAT32 文件系统的设备。该值表示如下组合：</p>
<ul>
<li><code>OC_SCAN_FILE_SYSTEM_LOCK</code></li>
<li><code>OC_SCAN_DEVICE_LOCK</code></li>
<li><code>OC_SCAN_ALLOW_FS_APFS</code></li>
<li><code>OC_SCAN_ALLOW_DEVICE_SATA</code></li>
<li><code>OC_SCAN_ALLOW_DEVICE_SASEX</code></li>
<li><code>OC_SCAN_ALLOW_DEVICE_SCSI</code></li>
<li><code>OC_SCAN_ALLOW_DEVICE_NVME</code></li>
</ul>
<h2 id="8-6-Entry-Properties"><a href="#8-6-Entry-Properties" class="headerlink" title="8.6 Entry Properties"></a>8.6 Entry Properties</h2><h3 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a><code>Arguments</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: 对该引导条目使用的引导参数。</p>
<h3 id="Auxiliary"><a href="#Auxiliary" class="headerlink" title="Auxiliary"></a><code>Auxiliary</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: false<br><strong>Description</strong>: 当 <code>HideAuxiliary</code> 被启用时，这一值为 <code>true</code> 的引导条目将不会显示在开机引导菜单中。</p>
<h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a><code>Comment</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: 用于为条目提供人类可读参考的任意 ASCII 字符串（译者注：即注释）。</p>
<h3 id="Enabled"><a href="#Enabled" class="headerlink" title="Enabled"></a><code>Enabled</code></h3><p><strong>Type</strong>: <code>plist boolean</code><br><strong>Failsafe</strong>: <code>false</code><br><strong>Description</strong>: 除非设置为 <code>true</code>，否则该引导条目不会显示在开机引导菜单中。</p>
<h3 id="Name"><a href="#Name" class="headerlink" title="Name"></a><code>Name</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: 引导条目在开机引导菜单中显示的名字。</p>
<h3 id="Path"><a href="#Path" class="headerlink" title="Path"></a><code>Path</code></h3><p><strong>Type</strong>: <code>plist string</code><br><strong>Failsafe</strong>: Empty string<br><strong>Description</strong>: 引导入口。</p>
<ul>
<li><code>Entries</code> 用于指定外部启动选项，因此会在 <code>Path</code> 中取设备路径。这些值不会被检查，所以要非常小心。例如：<code>PciRoot(0x0)/Pci(0x1,0x1)/.../\EFI\COOL.EFI</code>。</li>
<li><code>Tools</code> 用于指定内部引导选项，这些选项隶属于 bootloader vault，因此会取相对于 <code>OC/Tools</code> 目录的文件路径。例如：<code>OpenShell.efi</code>。</li>
</ul>

            </div>

            <ul class="doku-pagination">
            <li class="page-item page-prev">
                <a href="/7-kernel.html">
                    <div class="page-item-subtitle"><span class="icon is-small"><i class="fas fa-arrow-left"></i></span> <span>前一页</span></div>
                    <div class="page-item-title h5">7. Kernel</div>
                </a>
            </li>
            <li class="page-item page-next">
                <a href="/9-nvram.html">
                    <div class="page-item-subtitle"><span>后一页</span> <span class="icon is-small"><i class="fas fa-arrow-right"></i></span></div>
                    <div class="page-item-title h5">9. NVRAM</div>
                </a>
            </li></ul>
        </div>
        
        <div class="column is-3 is-narrow-touch is-hidden-mobile">
            <aside class="doku-document-toc" id="doku-document-toc">
                <div class="doku-document-toc-content">
                    <p class="doku-document-toc-title">目录</p>
                    <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-1-Introduction"><span class="post-toc-text">8.1 Introduction</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-2-Properties"><span class="post-toc-text">8.2 Properties</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Boot"><span class="post-toc-text">Boot</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#BlessOverride"><span class="post-toc-text">BlessOverride</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Debug"><span class="post-toc-text">Debug</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Entries"><span class="post-toc-text">Entries</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Security"><span class="post-toc-text">Security</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Tools"><span class="post-toc-text">Tools</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-3-Boot-Properties"><span class="post-toc-text">8.3 Boot Properties</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ConsoleAttributes"><span class="post-toc-text">ConsoleAttributes</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HibernateMode"><span class="post-toc-text">HibernateMode</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HideAuxiliary"><span class="post-toc-text">HideAuxiliary</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HideSelf"><span class="post-toc-text">HideSelf</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PickerAttributes"><span class="post-toc-text">PickerAttributes</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PickerAudioAssist"><span class="post-toc-text">PickerAudioAssist</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PollAppleHotKeys"><span class="post-toc-text">PollAppleHotKeys</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ShowPicker"><span class="post-toc-text">ShowPicker</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TakeoffDelay"><span class="post-toc-text">TakeoffDelay</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Timeout"><span class="post-toc-text">Timeout</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PickerMode"><span class="post-toc-text">PickerMode</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-4-Debug-Properties"><span class="post-toc-text">8.4 Debug Properties</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AppleDebug"><span class="post-toc-text">AppleDebug</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ApplePanic"><span class="post-toc-text">ApplePanic</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#DisableWatchDog"><span class="post-toc-text">DisableWatchDog</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#DisplayDelay"><span class="post-toc-text">DisplayDelay</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#DisplayLevel"><span class="post-toc-text">DisplayLevel</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SysReport"><span class="post-toc-text">SysReport</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Target"><span class="post-toc-text">Target</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-5-Security-Properties"><span class="post-toc-text">8.5 Security Properties</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AllowNvramReset"><span class="post-toc-text">AllowNvramReset</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AllowSetDefault"><span class="post-toc-text">AllowSetDefault</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AuthRestart"><span class="post-toc-text">AuthRestart</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#BlacklistAppleUpdate"><span class="post-toc-text">BlacklistAppleUpdate</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#BootProtect"><span class="post-toc-text">BootProtect</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ExposeSensitiveData"><span class="post-toc-text">ExposeSensitiveData</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HaltLevel"><span class="post-toc-text">HaltLevel</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Vault"><span class="post-toc-text">Vault</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ScanPolicy"><span class="post-toc-text">ScanPolicy</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#8-6-Entry-Properties"><span class="post-toc-text">8.6 Entry Properties</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Arguments"><span class="post-toc-text">Arguments</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Auxiliary"><span class="post-toc-text">Auxiliary</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Comment"><span class="post-toc-text">Comment</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Enabled"><span class="post-toc-text">Enabled</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Name"><span class="post-toc-text">Name</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Path"><span class="post-toc-text">Path</span></a></li></ol></li></ol>
                </div>
            </aside>
        </div>
        
    </div>
</article>

                <footer>
    <div class="doku-footer-container is-clearfix">
        <div class="doku-footer-item is-pulled-left">&copy; <span id="doku-copyrght-year"></span> <a href="/">OpenCore 简体中文参考手册(非官方)</a></div>

        <div class="doku-footer-item is-pulled-right">Powered by <a href="https://hexo.io" target="_blank" rel="external noopenner nofollow">Hexo</a> & <a href="https://github.com/SukkaW/hexo-theme-doku" target="_blank" rel="external noopenner nofollow">Doku</a></div>
    </div>
</footer>

            </main>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/stickyfilljs@2.1.0/dist/stickyfill.min.js"></script>
    <script src="/theme-doku/js/doku.js"></script>
</body>

</html>
